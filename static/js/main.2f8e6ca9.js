/*! For license information please see main.2f8e6ca9.js.LICENSE.txt */
(()=>{"use strict";var e={914:(e,t,n)=>{var r=n(483),i=n(557);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),I=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case k:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,_e=null;function ke(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),Ie(e.stateNode,e.type,t))}}function Te(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function xe(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return xe(e,t,n)}finally{De=!1,(null!==Ee||null!==_e)&&(Ne(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Re=!1}function Le(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,a,o,l){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ke(i),e;if(a===r)return Ke(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,It,Et,_t,kt,Tt=!1,Ct=[],xt=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Dt&&Ut(Dt)&&(Dt=null),At.forEach(Vt),Pt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==Dt&&zt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&St(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=Se(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},un,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return _n}var Tn=F({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Dn=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Rn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,Se(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Er={},_r={};function kr(e){if(Er[e])return Er[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Er[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var Tr=kr("animationend"),Cr=kr("animationiteration"),xr=kr("animationstart"),Nr=kr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,u),s=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,i=Se(n),a=[];e:{var o=Dr.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case xr:l=yn;break;case Nr:l=Dn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&c.push(Gr(p,m,f)))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:bi(l),f=null==u?o:bi(u),(o=new c(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Qr(a,o,l,c,!1),null!==u&&null!==h&&Qr(a,h,u,c,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Kn(o))if($n)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Ur(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Pe(n,s))&&a.unshift(Gr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[fi]||null}var Ii=[],Ei=-1;function _i(e){return{current:e}}function ki(e){0>Ei||(e.current=Ii[Ei],Ii[Ei]=null,Ei--)}function Ti(e,t){Ei++,Ii[Ei]=e.current,e.current=t}var Ci={},xi=_i(Ci),Ni=_i(!1),Di=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){ki(Ni),ki(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));Ti(xi,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Di=xi.current,Ti(xi,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,ki(Ni),ki(xi),Ti(xi,e)):ki(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=_i(null),vs=null,ws=null,bs=null;function Ss(){bs=ws=vs=null}function Is(e){var t=ys.current;ki(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _s(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Ts=null;function Cs(e){null===Ts?Ts=[e]:Ts.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function js(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(ru(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(i=Pi(t)?Di:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,As(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ks(s):(s=Pi(t)?Di:xi.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(js(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case I:return(t=Vu(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Ws(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?u(e,t,n,r):null;case I:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ws(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ws(t,r)}return null}function m(i,s,o,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===o.length)return n(i,h),is&&Xi(i,m),u;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===c?u=h:c.sibling=h,c=h);return is&&Xi(i,m),u}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),u}function g(i,o,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),o=a(w,o,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return is&&Xi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Qs(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=Hs(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===E?((s=Mu(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Lu(a.type,a.key,a.props,null,r.mode,l)).ref=Hs(r,s,a),l.return=r,r=l)}return o(r);case I:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vu(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(L(a))return g(r,s,a,l);Ws(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Uu(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Js=Ys(!0),$s=Ys(!1),Xs={},Zs=_i(Xs),ea=_i(Xs),ta=_i(Xs);function na(e){if(e===Xs)throw Error(s(174));return e}function ra(e,t){switch(Ti(ta,t),Ti(ea,e),Ti(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Zs),Ti(Zs,t)}function ia(){ki(Zs),ki(ea),ki(ta)}function sa(e){na(ta.current);var t=na(Zs.current),n=le(t,e.type);t!==n&&(Ti(ea,e),Ti(Zs,n))}function aa(e){ea.current===e&&(ki(Zs),ki(ea))}var oa=_i(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function ca(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=b.ReactCurrentDispatcher,da=b.ReactCurrentBatchConfig,fa=0,pa=null,ma=null,ga=null,ya=!1,va=!1,wa=0,ba=0;function Sa(){throw Error(s(321))}function Ia(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ea(e,t,n,r,i,a){if(fa=a,pa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ao:oo,e=n(r,i),va){a=0;do{if(va=!1,wa=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,ha.current=lo,e=n(r,i)}while(va)}if(ha.current=so,t=null!==ma&&null!==ma.next,fa=0,ga=ma=pa=null,ya=!1,t)throw Error(s(300));return e}function _a(){var e=0!==wa;return wa=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?pa.memoizedState=ga=e:ga=ga.next=e,ga}function Ta(){if(null===ma){var e=pa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?pa.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?pa.memoizedState=ga=e:ga=ga.next=e}return ga}function Ca(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((fa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,pa.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,pa.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Na(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Da(){}function Aa(e,t){var n=pa,r=Ta(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,qa(Oa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ua(9,Ra.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&fa)||Pa(n,t,i)}return i}function Pa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function Oa(e,t,n){return n((function(){La(t)&&Ma(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ma(e){var t=Ns(e,1);null!==t&&ru(t,e,1,-1)}function Fa(e){var t=ka();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,pa,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return Ta().memoizedState}function ja(e,t,n,r){var i=ka();pa.flags|=e,i.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function za(e,t,n,r){var i=Ta();r=void 0===r?null:r;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==r&&Ia(r,a.deps))return void(i.memoizedState=Ua(t,n,s,r))}pa.flags|=e,i.memoizedState=Ua(1|t,n,s,r)}function Ba(e,t){return ja(8390656,8,e,t)}function qa(e,t){return za(2048,8,e,t)}function Ka(e,t){return za(4,2,e,t)}function Ga(e,t){return za(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ha.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ia(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ia(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),pa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Xa(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{wt=n,da.transition=r}}function Za(){return Ta().memoizedState}function eo(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=xs(e,t,n,r))){ru(n,e,r,tu()),io(n,t,r)}}function to(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=xs(e,t,i,r))&&(ru(n,e,r,i=tu()),io(n,t,r))}}function no(e){var t=e.alternate;return e===pa||null!==t&&t===pa}function ro(e,t){va=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var so={readContext:ks,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},ao={readContext:ks,useCallback:function(e,t){return ka().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:Ba,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=ka();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ka();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,pa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ka().memoizedState=e},useState:Fa,useDebugValue:Qa,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=Xa.bind(null,e[1]),ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pa,i=ka();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&fa)||Pa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ba(Oa.bind(null,r,a,e),[e]),r.flags|=2048,Ua(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ka(),t=Dl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:ks,useCallback:Ya,useContext:ks,useEffect:qa,useImperativeHandle:Wa,useInsertionEffect:Ka,useLayoutEffect:Ga,useMemo:Ja,useReducer:xa,useRef:Va,useState:function(){return xa(Ca)},useDebugValue:Qa,useDeferredValue:function(e){return $a(Ta(),ma.memoizedState,e)},useTransition:function(){return[xa(Ca)[0],Ta().memoizedState]},useMutableSource:Da,useSyncExternalStore:Aa,useId:Za,unstable_isNewReconciler:!1},lo={readContext:ks,useCallback:Ya,useContext:ks,useEffect:qa,useImperativeHandle:Wa,useInsertionEffect:Ka,useLayoutEffect:Ga,useMemo:Ja,useReducer:Na,useRef:Va,useState:function(){return Na(Ca)},useDebugValue:Qa,useDeferredValue:function(e){var t=Ta();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[Na(Ca)[0],Ta().memoizedState]},useMutableSource:Da,useSyncExternalStore:Aa,useId:Za,unstable_isNewReconciler:!1};function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Hl=r),ho(0,t)},n}function mo(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wo=b.ReactCurrentOwner,bo=!1;function So(e,t,n,r){t.child=null===e?$s(t,null,n,r):Js(t,e.child,n,r)}function Io(e,t,n,r,i){n=n.render;var s=t.ref;return _s(t,i),r=Ea(e,t,n,r,s,i),n=_a(),null===e||bo?(is&&n&&es(t),t.flags|=1,So(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function Eo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ru(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_o(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Go(e,t,i)}return t.flags|=1,(e=Ou(s,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Go(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Rl),Rl|=r;return So(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=Pi(n)?Di:xi.current;return s=Ai(t,s),_s(t,i),n=Ea(e,t,n,r,s,i),r=_a(),null===e||bo?(is&&r&&es(t),t.flags|=1,So(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function xo(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(_s(t,i),null===t.stateNode)Ko(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ks(u):u=Ai(t,u=Pi(n)?Di:xi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&Ks(t,a,r,u),Ds=!1;var d=t.memoizedState;a.state=d,Fs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ni.current||Ds?("function"===typeof c&&(js(t,n,c,r),l=t.memoizedState),(o=Ds||Bs(t,n,o,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ps(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:gs(t.type,o),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ks(l):l=Ai(t,l=Pi(n)?Di:xi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&Ks(t,a,r,l),Ds=!1,d=t.memoizedState,a.state=d,Fs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ni.current||Ds?("function"===typeof f&&(js(t,n,f,r),p=t.memoizedState),(u=Ds||Bs(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return No(e,t,n,r,s,i)}function No(e,t,n,r,i,s){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Go(e,t,s);r=t.stateNode,wo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,o,s)):So(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ra(e,t.containerInfo)}function Ao(e,t,n,r,i){return fs(),ps(i),t.flags|=256,So(e,t,n,r),t.child}var Po,Ro,Oo,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,a=oa.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(oa,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fu(l,i,0,null),e=Mu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,jo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(a=Mu(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Js(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return jo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,jo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Dl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ns(e,i),ru(r,e,i,-1))}return gu(),jo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=$i,Wi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Ou(r,o):(o=Mu(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Ou(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vo(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jo(e,t,n,r){return null!==r&&ps(r),Js(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Bo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(So(e,t,r.children,n),0!==(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(oa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Go(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wo(t),null;case 3:return r=t.stateNode,ia(),ki(Ni),ki(xi),ca(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Ro(e,t),Wo(t),null;case 5:aa(t);var i=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=na(Zs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Vr("scroll",e):null!=c&&w(e,a,c,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wo(t),null;case 13:if(ki(oa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ou(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Ll&&(Ll=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return ia(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Wo(t),null;case 10:return Is(t.type._context),Wo(t),null;case 19:if(ki(oa),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>ql&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*$e()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=oa.current,Ti(oa,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),ki(Ni),ki(xi),ca(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(ki(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(oa),null;case 4:return ia(),null;case 10:return Is(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,na(Zs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){ku(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){ku(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:$o||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$o&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ku(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,fl(e,t,n),$o=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){ku(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){ku(e,e.return,g)}try{rl(5,e,e.return)}catch(g){ku(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){ku(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),we(l,o);var c=we(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":X(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){ku(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){ku(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){ku(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=$e())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($o=(c=$o)||h,gl(t,e),$o=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){ku(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Il(d);continue}}null!==p?(p.return=f,Zo=p):Il(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",o))}catch(g){ku(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ku(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){ku(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Jo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var u=$o;if(Jo=a,($o=l)&&!u)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Zo=l):El(i);for(;null!==s;)Zo=s,bl(s,t,n),s=s.sibling;Zo=i,Jo=o,$o=u}Sl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):Sl(e)}}function Sl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$o||512&t.flags&&sl(t)}catch(f){ku(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Il(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function El(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){ku(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){ku(t,i,l)}}var s=t.return;try{sl(t)}catch(l){ku(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){ku(t,a,l)}}}catch(l){ku(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var _l,kl=Math.ceil,Tl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Nl=0,Dl=null,Al=null,Pl=0,Rl=0,Ol=_i(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,jl=null,zl=null,Bl=0,ql=1/0,Kl=null,Gl=!1,Hl=null,Wl=null,Ql=!1,Yl=null,Jl=0,$l=0,Xl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Nl)?$e():-1!==Zl?Zl:Zl=$e()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===eu&&(eu=mt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ru(e,t,n,r){if(50<$l)throw $l=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Dl||(e===Dl&&(0===(2&Nl)&&(Ul|=n),4===Ll&&lu(e,Pl)),iu(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=$e()+500,Vi&&Bi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Dl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),ai((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Du(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Nl;Nl|=2;var a=mu();for(Dl===e&&Pl===t||(Kl=null,ql=$e()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}Ss(),Tl.current=a,Nl=i,null!==Al?t=0:(Dl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ml,fu(e,0),lu(e,r),iu(e,$e()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(a=pt(e))&&(r=a,t=au(e,a))),1===t))throw n=Ml,fu(e,0),lu(e,r),iu(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Iu(e,zl,Kl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Iu.bind(null,e,zl,Kl),t);break}Iu(e,zl,Kl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Iu.bind(null,e,zl,Kl),r);break}Iu(e,zl,Kl);break;default:throw Error(s(329))}}}return iu(e,$e()),e.callbackNode===n?su.bind(null,e):null}function au(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=zl,zl=n,null!==t&&ou(t)),e}function ou(e){null===zl?zl=e:zl.push.apply(zl,e)}function lu(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Nl))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return iu(e,$e()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ml,fu(e,0),lu(e,t),iu(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Iu(e,zl,Kl),iu(e,$e()),null}function cu(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=$e()+500,Vi&&Bi())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Eu();var t=Nl;Nl|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Nl=t))&&Bi()}}function du(){Rl=Ol.current,ki(Ol)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:ia(),ki(Ni),ki(xi),ca();break;case 5:aa(r);break;case 4:ia();break;case 13:case 19:ki(oa);break;case 10:Is(r.type._context);break;case 22:case 23:du()}n=n.return}if(Dl=e,Al=e=Ou(e.current,null),Pl=Rl=t,Ll=0,Ml=null,Vl=Ul=Fl=0,zl=jl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ts=null}return e}function pu(e,t){for(;;){var n=Al;try{if(Ss(),ha.current=so,ya){for(var r=pa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(fa=0,ga=ma=pa=null,va=!1,wa=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Al=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){go(a,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),ps(uo(u,l));break e}}a=u=uo(u,l),4!==Ll&&(Ll=2),null===jl?jl=[a]:jl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ms(a,po(0,u,t));break e;case 1:l=u;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Ms(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}Su(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=so,null===e?so:e}function gu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Dl||0===(268435455&Fl)&&0===(268435455&Ul)||lu(Dl,Pl)}function yu(e,t){var n=Nl;Nl|=2;var r=mu();for(Dl===e&&Pl===t||(Kl=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Ss(),Nl=n,Tl.current=r,null!==Al)throw Error(s(261));return Dl=null,Pl=0,Ll}function vu(){for(;null!==Al;)bu(Al)}function wu(){for(;null!==Al&&!Ye();)bu(Al)}function bu(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?Su(e):Al=t,Cl.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function Iu(e,t,n){var r=wt,i=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Eu()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Dl&&(Al=Dl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Du(tt,(function(){return Eu(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=xl.transition,xl.transition=null;var o=wt;wt=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=o),f===a&&++h===r&&(u=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(S){ku(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Je(),Nl=l,wt=o,xl.transition=a}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Jl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Hl,Hl=null,e;0!==(1&Jl)&&0!==e.tag&&Eu(),a=e.pendingLanes,0!==(1&a)?e===Xl?$l++:($l=0,Xl=e):$l=0,Bi()}(e,t,n,r)}finally{xl.transition=i,wt=r}return null}function Eu(){if(null!==Yl){var e=bt(Jl),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zo=c;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===c){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var w=e.current;for(Zo=w;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=w;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(I){ku(l,l.return,I)}if(l===o){Zo=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Zo=S;break e}Zo=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function _u(e,t,n){e=Os(e,t=po(0,t=uo(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function ku(e,t,n){if(3===e.tag)_u(e,e,n);else for(;null!==t;){if(3===t.tag){_u(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Os(t,e=mo(t,e=uo(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>$e()-Bl?fu(e,0):Vl|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ns(e,t))&&(yt(e,t,n),iu(e,n))}function xu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cu(e,n)}function Du(e,t){return We(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Au(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Ru(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Mu(n.children,i,a,t);case _:o=8,i|=8;break;case k:return(e=Pu(12,n,t,2|i)).elementType=k,e.lanes=a,e;case N:return(e=Pu(13,n,t,i)).elementType=N,e.lanes=a,e;case D:return(e=Pu(19,n,t,i)).elementType=D,e.lanes=a,e;case R:return Fu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case C:o=9;break e;case x:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Vu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,s,a,o,l){return e=new ju(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function Bu(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qu(e,t,n,r,i,s,a,o,l){return(e=zu(n,r,!0,e,0,s,0,o,l)).context=Bu(null),n=e.current,(s=Rs(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Ku(e,t,n,r){var i=t.current,s=tu(),a=nu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,a))&&(ru(e,i,a,s),Ls(e,i,a)),a}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Do(t),fs();break;case 5:sa(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ti(oa,1&oa.current),null!==(e=Go(e,t,n))?e.sibling:null);Ti(oa,1&oa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Go(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ko(e,t),e=t.pendingProps;var i=Ai(t,xi.current);_s(t,n),i=Ea(null,t,r,e,i,n);var a=_a();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=No(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),So(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ko(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=xo(null,t,r,e,n);break e;case 11:t=Io(null,t,r,e,n);break e;case 14:t=Eo(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Do(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=uo(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=uo(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=$s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Go(e,t,n);break e}So(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),To(e,t),So(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Uo(e,t,n);case 4:return ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Js(t,null,r,n):So(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return So(e,t,t.pendingProps,n),t.child;case 8:case 12:return So(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ti(ys,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Go(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Rs(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Es(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}So(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_s(t,n),r=r(i=ks(i)),t.flags|=1,So(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Eo(e,t,r,i=gs(r.type,i),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ko(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,_s(t,n),qs(t,r,i),Gs(t,r,i,n),No(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Gu(a);o.call(e)}}Ku(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(a);s.call(e)}}var a=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),hu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Gu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Gu(a)}Ju.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ku(e,t,null,null)},Ju.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[pi]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,$e()),0===(6&Nl)&&(ql=$e()+500,Bi()))}break;case 13:hu((function(){var t=Ns(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Wu(e,1)}},It=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)ru(t,e,134217728,tu());Wu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=Ns(e,t);if(null!==n)ru(n,e,t,tu());Wu(e,t)}},_t=function(){return wt},kt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cu,Ne=hu;var tc={usingClientEntryPoint:!1,Events:[wi,bi,Si,Te,Ce,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(s(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},998:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(914)},9:(e,t,n)=>{var r=n(483),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},146:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var S=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+x(l,0):s,S(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",S(e))for(var u=0;u<e.length;u++){var c=s+x(o=e[u],u);l+=N(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,c=s+x(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)I.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},483:(e,t,n)=>{e.exports=n(146)},723:(e,t,n)=>{e.exports=n(9)},122:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,R(I);else{var t=r(c);null!==t&&O(S,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(S,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,_=!1,k=null,T=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function D(){if(null!==k){var e=t.unstable_now();x=e;var n=!0;try{n=k(!0,e)}finally{n?E():(_=!1,k=null)}}else _=!1}if("function"===typeof w)E=function(){w(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,E=function(){P.postMessage(null)}}else E=function(){y(D,0)};function R(e){k=e,_||(_=!0,E())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,O(S,s-a))):(e.sortIndex=o,n(u,e),m||p||(m=!0,R(I))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},557:(e,t,n)=>{e.exports=n(122)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t=n(483),r=n.t(t,2),i=n(998),s=n.t(i,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:u=!1}=i,f=s.history,p=e.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(a({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return t(s,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(o,v),m=e,()=>{s.removeEventListener(o,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=h(b.location,t,n);r&&r(i,t),g=y()+1;let a=c(i,g),o=b.createHref(i);try{f.pushState(a,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(o)}u&&m&&m({action:p,location:b.location,delta:1})},replace:function(t,n){p=e.Replace;let i=h(b.location,t,n);r&&r(i,t),g=y();let s=c(i,g),a=b.createHref(i);f.replaceState(s,"",a),u&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let a=0;null==s&&a<i.length;++a){let e=N(r);s=C(i[a],e)}return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=L([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=v(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,b=3,S=2,I=1,E=10,_=-2,k=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=_),t&&(r+=S),n.filter((e=>!k(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?I:E)),r)}function C(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let a=0;a<n.length;++a){let e=n[a],o=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=x({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:L([i,u.pathname]),pathnameBase:M(L([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=L([i,u.pathnameBase]))}return s}function x(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function N(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=P(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),A("#","search","hash",i)));let s,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(null==u)s=n;else{let e=t.length-1;if(!r&&u.startsWith("..")){let t=u.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:U(i)}}(i,s),h=u&&"/"!==u&&u.endsWith("/"),d=(o||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],z=(new Set(j),["get",...j]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const q=t.createContext(null);const K=t.createContext(null);const G=t.createContext(null);const H=t.createContext(null);const W=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function Y(){return null!=t.useContext(H)}function J(){return Y()||l(!1),t.useContext(H).location}function $(e){t.useContext(G).static||t.useLayoutEffect(e)}function X(){let{isDataRoute:e}=t.useContext(W);return e?function(){let{router:e}=le(ae.UseNavigateStable),n=ce(oe.UseNavigateStable),r=t.useRef(!1);$((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,B({fromRouteId:n},i)))}),[e,n]);return i}():function(){Y()||l(!1);let e=t.useContext(q),{basename:n,future:r,navigator:i}=t.useContext(G),{matches:s}=t.useContext(W),{pathname:a}=J(),o=JSON.stringify(R(s,r.v7_relativeSplatPath)),u=t.useRef(!1);return $((()=>{u.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!u.current)return;if("number"===typeof t)return void i.go(t);let s=O(t,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:L([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,o,a,e])}()}function Z(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(G),{matches:s}=t.useContext(W),{pathname:a}=J(),o=JSON.stringify(R(s,i.v7_relativeSplatPath));return t.useMemo((()=>O(e,JSON.parse(o),a,"path"===r)),[e,o,a,r])}function ee(n,r,i,s){Y()||l(!1);let{navigator:a}=t.useContext(G),{matches:o}=t.useContext(W),u=o[o.length-1],c=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let d,p=J();if(r){var m;let e="string"===typeof r?f(r):r;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||l(!1),d=e}else d=p;let y=d.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=g(n,{pathname:v});let b=se(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:L([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,i,s);return r&&b?t.createElement(H.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},b):b}function te(){let e=function(){var e;let n=t.useContext(Q),r=ue(oe.UseRouteError),i=ce(oe.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const ne=t.createElement(te,null);class re extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(W.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(q);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(W.Provider,{value:n},i)}function se(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}let o=e,u=null==(s=r)?void 0:s.errors;if(null!=u){let e=o.findIndex((e=>e.route.id&&(null==u?void 0:u[e.route.id])));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){c=!0,o=h>=0?o.slice(0,h+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,l=!1,d=null,f=null;var p;r&&(a=u&&i.route.id?u[i.route.id]:void 0,d=i.route.errorElement||ne,c&&(h<0&&0===s?(p="route-fallback",!1||he[p]||(he[p]=!0),l=!0,f=null):h===s&&(l=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,s+1)),g=()=>{let n;return n=a?d:l?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ie,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(re,{location:r.location,revalidation:r.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),oe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oe||{});function le(e){let n=t.useContext(q);return n||l(!1),n}function ue(e){let n=t.useContext(K);return n||l(!1),n}function ce(e){let n=function(e){let n=t.useContext(W);return n||l(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||l(!1),r.route.id}const he={};r.startTransition;function de(e){l(!1)}function fe(n){let{basename:r="/",children:i=null,location:s,navigationType:a=e.Pop,navigator:o,static:u=!1,future:c}=n;Y()&&l(!1);let h=r.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:h,navigator:o,static:u,future:B({v7_relativeSplatPath:!1},c)})),[h,c,o,u]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,w=t.useMemo((()=>{let e=D(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}}),[h,p,m,g,y,v,a]);return null==w?null:t.createElement(G.Provider,{value:d},t.createElement(H.Provider,{children:i,value:w}))}function pe(e){let{children:t,location:n}=e;return ee(me(t),n)}new Promise((()=>{}));t.Component;function me(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,me(e.props.children,s));e.type!==de&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=me(e.props.children,s)),r.push(a)})),r}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function ve(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(bI){}new Map;const be=r.startTransition;s.flushSync,r.useId;function Se(e){let{basename:n,children:r,future:i,window:s}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),p((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=f(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:d(t))}),(function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),o)));let l=a.current,[c,m]=t.useState({action:l.action,location:l.location}),{v7_startTransition:g}=i||{},y=t.useCallback((e=>{g&&be?be((()=>m(e))):m(e)}),[m,g]);return t.useLayoutEffect((()=>l.listen(y)),[l,y]),t.createElement(fe,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:a,replace:o,state:u,target:c,to:h,preventScrollReset:f,unstable_viewTransition:p}=e,m=ye(e,we),{basename:g}=t.useContext(G),y=!1;if("string"===typeof h&&Ee.test(h)&&(r=h,Ie))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=D(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(bI){}let v=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||l(!1);let{basename:i,navigator:s}=t.useContext(G),{hash:a,pathname:o,search:u}=Z(e,{relative:r}),c=o;return"/"!==i&&(c="/"===o?i:L([i,o])),s.createHref({pathname:c,search:u,hash:a})}(h,{relative:s}),w=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,u=X(),c=J(),h=Z(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:d(c)===d(h);u(e,{replace:n,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[c,u,h,i,s,r,e,a,o,l])}(h,{replace:o,state:u,target:c,preventScrollReset:f,relative:s,unstable_viewTransition:p});return t.createElement("a",ge({},m,{href:r||v,onClick:y||a?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:n,target:c}))}));var ke,Te;function Ce(e){let n=t.useRef(ve(e)),r=t.useRef(!1),i=J(),s=t.useMemo((()=>function(e,t){let n=ve(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(i.search,r.current?null:n.current)),[i.search]),a=X(),o=t.useCallback(((e,t)=>{const n=ve("function"===typeof e?e(s):e);r.current=!0,a("?"+n,t)}),[a,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));const xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new De;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(e){return function(e){const t=xe(e);return Ne.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Pe=function(e){try{return Ne.decodeString(e,!0)}catch(bI){console.error("base64Decode failed: ",bI)}return null};const Re=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Oe=()=>{try{return Re()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/dungeon-masters-guide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(bI){return}const t=e&&Pe(e[1]);return t&&JSON.parse(t)})()}catch(bI){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(bI))}},Le=e=>{var t,n;return null===(n=null===(t=Oe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Me=()=>{var e;return null===(e=Oe())||void 0===e?void 0:e.config},Fe=e=>{var t;return null===(t=Oe())||void 0===t?void 0:t["_".concat(e)]};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function je(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ze(){return!function(){var e;const t=null===(e=Oe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(bI){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"===typeof indexedDB}catch(bI){return!1}}function qe(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class Ke extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(He,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ke(n,s,t)}}const He=/\{\$([^}]+)}/g;function We(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Qe(n)&&Qe(s)){if(!We(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qe(e){return null!==e&&"object"===typeof e}function Ye(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Je(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function $e(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Xe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ze),void 0===r.error&&(r.error=Ze),void 0===r.complete&&(r.complete=Ze);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(bI){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(bI){"undefined"!==typeof console&&console.error&&console.error(bI)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ze(){}const et=1e3,tt=2,nt=144e5,rt=.5;function it(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tt;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:et)*Math.pow(t,e),r=Math.round(rt*n*(Math.random()-.5)*2);return Math.min(nt,n+r)}function st(e){return e&&e._delegate?e._delegate:e}class at{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ot="[DEFAULT]";class lt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ue;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(bI){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bI){if(r)return null;throw bI}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(bI){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(bI){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ot?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.component?this.component.multipleInstances?e:ot:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ct=[];var ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));const dt={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},ft=ht.INFO,pt={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},mt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class gt{constructor(e){this.name=e,this._logLevel=ft,this._logHandler=mt,this._userLogHandler=null,ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const yt=(e,t)=>t.some((t=>e instanceof t));let vt,wt;const bt=new WeakMap,St=new WeakMap,It=new WeakMap,Et=new WeakMap,_t=new WeakMap;let kt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return St.get(e);if("objectStoreNames"===t)return e.objectStoreNames||It.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Tt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wt||(wt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Nt(this),n),xt(bt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xt(e.apply(Nt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Nt(this),t,...r);return It.set(s,t.sort?t.sort():[t]),xt(s)}}function Ct(e){return"function"===typeof e?Tt(e):(e instanceof IDBTransaction&&function(e){if(St.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));St.set(e,t)}(e),yt(e,vt||(vt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,kt):e)}function xt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(xt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&bt.set(t,e)})).catch((()=>{})),_t.set(t,e),t}(e);if(Et.has(e))return Et.get(e);const t=Ct(e);return t!==e&&(Et.set(e,t),_t.set(t,e)),t}const Nt=e=>_t.get(e);function Dt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=xt(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(xt(a.result),e.oldVersion,e.newVersion,xt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const At=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Rt=new Map;function Ot(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rt.get(t))return Rt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!At.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Rt.set(t,s),s}kt=(e=>({...e,get:(t,n,r)=>Ot(t,n)||e.get(t,n,r),has:(t,n)=>!!Ot(t,n)||e.has(t,n)}))(kt);class Lt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Mt="@firebase/app",Ft="0.9.28",Ut=new gt("@firebase/app"),Vt="[DEFAULT]",jt={[Mt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zt=new Map,Bt=new Map;function qt(e,t){try{e.container.addComponent(t)}catch(bI){Ut.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),bI)}}function Kt(e){const t=e.name;if(Bt.has(t))return Ut.debug("There were multiple attempts to register component ".concat(t,".")),!1;Bt.set(t,e);for(const n of zt.values())qt(n,e);return!0}function Gt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ht=new Ge("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new at("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}const Qt="10.8.1";function Yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ht.create("bad-app-name",{appName:String(i)});if(n||(n=Me()),!n)throw Ht.create("no-options");const s=zt.get(i);if(s){if(We(n,s.options)&&We(r,s.config))return s;throw Ht.create("duplicate-app",{appName:i})}const a=new ut(i);for(const l of Bt.values())a.addComponent(l);const o=new Wt(n,r,a);return zt.set(i,o),o}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt;const t=zt.get(e);if(!t&&e===Vt&&Me())return Yt();if(!t)throw Ht.create("no-app",{appName:e});return t}function $t(e,t,n){var r;let i=null!==(r=jt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ut.warn(e.join(" "))}Kt(new at("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Xt="firebase-heartbeat-database",Zt=1,en="firebase-heartbeat-store";let tn=null;function nn(){return tn||(tn=Dt(Xt,Zt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(en)}catch(bI){console.warn(bI)}}}).catch((e=>{throw Ht.create("idb-open",{originalErrorMessage:e.message})}))),tn}async function rn(e,t){try{const n=(await nn()).transaction(en,"readwrite"),r=n.objectStore(en);await r.put(t,sn(e)),await n.done}catch(bI){if(bI instanceof Ke)Ut.warn(bI.message);else{const t=Ht.create("idb-set",{originalErrorMessage:null===bI||void 0===bI?void 0:bI.message});Ut.warn(t.message)}}}function sn(e){return"".concat(e.name,"!").concat(e.options.appId)}class an{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ln(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=on();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=on(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),un(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),un(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ae(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function on(){return(new Date).toISOString().substring(0,10)}class ln{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Be()&&qe().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await nn()).transaction(en),n=await t.objectStore(en).get(sn(e));return await t.done,n}catch(bI){if(bI instanceof Ke)Ut.warn(bI.message);else{const t=Ht.create("idb-get",{originalErrorMessage:null===bI||void 0===bI?void 0:bI.message});Ut.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function un(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}var cn;cn="",Kt(new at("platform-logger",(e=>new Lt(e)),"PRIVATE")),Kt(new at("heartbeat",(e=>new an(e)),"PRIVATE")),$t(Mt,Ft,cn),$t(Mt,Ft,"esm2017"),$t("fire-js","");$t("firebase","10.8.1","app");const hn="@firebase/installations",dn="0.6.5",fn=1e4,pn="w:".concat(dn),mn="FIS_v2",gn="https://firebaseinstallations.googleapis.com/v1",yn=36e5,vn=new Ge("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function wn(e){return e instanceof Ke&&e.code.includes("request-failed")}function bn(e){let{projectId:t}=e;return"".concat(gn,"/projects/").concat(t,"/installations")}function Sn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function In(e,t){const n=(await t.json()).error;return vn.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function En(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _n(e,t){let{refreshToken:n}=t;const r=En(e);return r.append("Authorization",function(e){return"".concat(mn," ").concat(e)}(n)),r}async function kn(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Tn(e){return new Promise((t=>{setTimeout(t,e)}))}const Cn=/^[cdef][\w-]{21}$/,xn="";function Nn(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Cn.test(t)?t:xn}catch(e){return xn}}function Dn(e){return"".concat(e.appName,"!").concat(e.appId)}const An=new Map;function Pn(e,t){const n=Dn(e);Rn(n,t),function(e,t){const n=Ln();n&&n.postMessage({key:e,fid:t});Mn()}(n,t)}function Rn(e,t){const n=An.get(e);if(n)for(const r of n)r(t)}let On=null;function Ln(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=e=>{Rn(e.data.key,e.data.fid)}),On}function Mn(){0===An.size&&On&&(On.close(),On=null)}const Fn="firebase-installations-database",Un=1,Vn="firebase-installations-store";let jn=null;function zn(){return jn||(jn=Dt(Fn,Un,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Vn)}})),jn}async function Bn(e,t){const n=Dn(e),r=(await zn()).transaction(Vn,"readwrite"),i=r.objectStore(Vn),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Pn(e,t.fid),t}async function qn(e){const t=Dn(e),n=(await zn()).transaction(Vn,"readwrite");await n.objectStore(Vn).delete(t),await n.done}async function Kn(e,t){const n=Dn(e),r=(await zn()).transaction(Vn,"readwrite"),i=r.objectStore(Vn),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||Pn(e,a.fid),a}async function Gn(e){let t;const n=await Kn(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Nn(),registrationStatus:0};return Qn(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(vn.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=bn(n),a=En(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:mn,appId:n.appId,sdkVersion:pn},u={method:"POST",headers:a,body:JSON.stringify(l)},c=await kn((()=>fetch(s,u)));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Sn(e.authToken)}}throw await In("Create Installation",c)}(e,t);return Bn(e.appConfig,n)}catch(bI){throw wn(bI)&&409===bI.customData.serverCode?await qn(e.appConfig):await Bn(e.appConfig,{fid:t.fid,registrationStatus:0}),bI}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Hn(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===xn?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Hn(e){let t=await Wn(e.appConfig);for(;1===t.registrationStatus;)await Tn(100),t=await Wn(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Gn(e);return n||t}return t}function Wn(e){return Kn(e,(e=>{if(!e)throw vn.create("installation-not-found");return Qn(e)}))}function Qn(e){return 1===(t=e).registrationStatus&&t.registrationTime+fn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Yn(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(bn(e),"/").concat(n,"/authTokens:generate")}(n,t),s=_n(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:pn,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await kn((()=>fetch(i,l)));if(u.ok){return Sn(await u.json())}throw await In("Generate Auth Token",u)}async function Jn(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Kn(e.appConfig,(r=>{if(!Xn(r))throw vn.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+yn}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await $n(e.appConfig);for(;1===n.authToken.requestStatus;)await Tn(100),n=await $n(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Jn(e,t):r}(e,n),r;{if(!navigator.onLine)throw vn.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Yn(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Bn(e.appConfig,r),n}catch(bI){if(!wn(bI)||401!==bI.customData.serverCode&&404!==bI.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Bn(e.appConfig,n)}else await qn(e.appConfig);throw bI}}(e,n),n}}));return t?await t:r.authToken}function $n(e){return Kn(e,(e=>{if(!Xn(e))throw vn.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+fn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Xn(e){return void 0!==e&&2===e.registrationStatus}async function Zn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Gn(e);t&&await t}(n);return(await Jn(n,t)).token}function er(e){return vn.create("missing-app-config-values",{valueName:e})}const tr="installations",nr=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw er("App Configuration");if(!e.name)throw er("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw er(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Gt(t,"heartbeat"),_delete:()=>Promise.resolve()}},rr=e=>{const t=Gt(e.getProvider("app").getImmediate(),tr).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Gn(t);return r?r.catch(console.error):Jn(t).catch(console.error),n.fid}(t),getToken:e=>Zn(t,e)}};Kt(new at(tr,nr,"PUBLIC")),Kt(new at("installations-internal",rr,"PRIVATE")),$t(hn,dn),$t(hn,dn,"esm2017");const ir="analytics",sr="firebase_id",ar="origin",or=6e4,lr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ur="https://www.googletagmanager.com/gtag/js",cr=new gt("@firebase/analytics"),hr=new Ge("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function dr(e){if(!e.startsWith(ur)){const t=hr.create("invalid-gtag-resource",{gtagURL:e});return cr.warn(t.message),""}return e}function fr(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function pr(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:dr}),r=document.createElement("script"),i="".concat(ur,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function mr(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await fr(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(bI){cr.error(bI)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await fr(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(bI){cr.error(bI)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=a;e("consent","update",t)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(bI){cr.error(bI)}}}const gr=30;const yr=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function vr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw hr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw hr.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Sr;return setTimeout((async()=>{o.abort()}),void 0!==n?n:or),br({appId:r,apiKey:i,measurementId:s},a,o,t)}async function br(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yr;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(hr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(bI){if(l)return cr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===bI||void 0===bI?void 0:bI.message,"]")),{appId:o,measurementId:l};throw bI}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:vr(r)},s=lr.replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw hr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(bI){const r=bI;if(!function(e){if(!(e instanceof Ke)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(o),l)return cr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:o,measurementId:l};throw bI}const u=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?it(i,s.intervalMillis,gr):it(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:i+1};return s.setThrottleMetadata(o,c),cr.debug("Calling attemptFetch again in ".concat(u," millis")),br(e,c,n,s)}}class Sr{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ir,Er;function _r(e){Er=e}function kr(e){Ir=e}async function Tr(e,t,n,r,i,s,a){var o;const l=wr(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&cr.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>cr.error(e))),t.push(l);const u=async function(){if(!Be())return cr.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await qe()}catch(bI){return cr.warn(hr.create("indexeddb-unavailable",{errorInfo:null===bI||void 0===bI?void 0:bI.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ur)&&n.src.includes(e))return n;return null})(s)||pr(s,c.measurementId),Er&&(i("consent","default",Er),_r(void 0)),i("js",new Date);const d=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return d[ar]="firebase",d.update=!0,null!=h&&(d[sr]=h),i("config",c.measurementId,d),Ir&&(i("set",Ir),kr(void 0)),c.measurementId}class Cr{constructor(e){this.app=e}_delete(){return delete xr[this.app.options.appId],Promise.resolve()}}let xr={},Nr=[];const Dr={};let Ar,Pr,Rr="dataLayer",Or="gtag",Lr=!1;function Mr(){const e=[];if(je()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=hr.create("invalid-analytics-context",{errorInfo:t});cr.warn(n.message)}}function Fr(e,t,n){Mr();const r=e.options.appId;if(!r)throw hr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw hr.create("no-api-key");cr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=xr[r])throw hr.create("already-exists",{id:r});if(!Lr){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Rr);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=mr(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(xr,Nr,Dr,Rr,Or);Pr=e,Ar=t,Lr=!0}xr[r]=Tr(e,Nr,Dr,t,Ar,Rr,n);return new Cr(e)}function Ur(e,t,n,r){e=st(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Pr,xr[e.app.options.appId],t,n,r).catch((e=>cr.error(e)))}const Vr="@firebase/analytics",jr="0.10.1";Kt(new at(ir,((e,t)=>{let{options:n}=t;return Fr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Kt(new at("analytics-internal",(function(e){try{const t=e.getProvider(ir).getImmediate();return{logEvent:(e,n,r)=>Ur(t,e,n,r)}}catch(bI){throw hr.create("interop-component-reg-failed",{reason:bI})}}),"PRIVATE")),$t(Vr,jr),$t(Vr,jr,"esm2017");var zr,Br="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},qr={},Kr=Kr||{},Gr=Br||self;function Hr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Wr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Qr="closure_uid_"+(1e9*Math.random()>>>0),Yr=0;function Jr(e,t,n){return e.call.apply(e.bind,arguments)}function $r(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xr(e,t,n){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jr:$r).apply(null,arguments)}function Zr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ei(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ti(){this.s=this.s,this.o=this.o}ti.prototype.s=!1,ti.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Qr)&&e[Qr]||(e[Qr]=++Yr))},ti.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ni=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ri(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ii(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Hr(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function si(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}si.prototype.h=function(){this.defaultPrevented=!0};var ai=function(){if(!Gr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Gr.addEventListener("test",e,t),Gr.removeEventListener("test",e,t)}catch(n){}return e}();function oi(e){return/^[\s\xa0]*$/.test(e)}function li(){var e=Gr.navigator;return e&&(e=e.userAgent)?e:""}function ui(e){return-1!=li().indexOf(e)}function ci(e){return ci[" "](e),e}ci[" "]=function(){};var hi,di,fi=ui("Opera"),pi=ui("Trident")||ui("MSIE"),mi=ui("Edge"),gi=mi||pi,yi=ui("Gecko")&&!(-1!=li().toLowerCase().indexOf("webkit")&&!ui("Edge"))&&!(ui("Trident")||ui("MSIE"))&&!ui("Edge"),vi=-1!=li().toLowerCase().indexOf("webkit")&&!ui("Edge");function wi(){var e=Gr.document;return e?e.documentMode:void 0}e:{var bi="",Si=function(){var e=li();return yi?/rv:([^\);]+)(\)|;)/.exec(e):mi?/Edge\/([\d\.]+)/.exec(e):pi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vi?/WebKit\/(\S+)/.exec(e):fi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Si&&(bi=Si?Si[1]:""),pi){var Ii=wi();if(null!=Ii&&Ii>parseFloat(bi)){hi=String(Ii);break e}}hi=bi}if(Gr.document&&pi){var Ei=wi();di=Ei||(parseInt(hi,10)||void 0)}else di=void 0;var _i=di;function ki(e,t){if(si.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yi){e:{try{ci(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ti[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ki.$.h.call(this)}}ei(ki,si);var Ti={2:"touch",3:"pen",4:"mouse"};ki.prototype.h=function(){ki.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ci="closure_listenable_"+(1e6*Math.random()|0),xi=0;function Ni(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++xi,this.fa=this.ia=!1}function Di(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ai(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Pi(e){const t={};for(const n in e)t[n]=e[n];return t}const Ri="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Ri.length;t++)n=Ri[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Li(e){this.src=e,this.g={},this.h=0}function Mi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ni(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Di(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Li.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=Fi(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Ni(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Ui="closure_lm_"+(1e6*Math.random()|0),Vi={};function ji(e,t,n,r,i){if(r&&r.once)return Bi(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ji(e,t[s],n,r,i);return null}return n=Yi(n),e&&e[Ci]?e.O(t,n,Wr(r)?!!r.capture:!!r,i):zi(e,t,n,!1,r,i)}function zi(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=Wr(i)?!!i.capture:!!i,o=Wi(e);if(o||(e[Ui]=o=new Li(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Hi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ai||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Bi(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Bi(e,t[s],n,r,i);return null}return n=Yi(n),e&&e[Ci]?e.P(t,n,Wr(r)?!!r.capture:!!r,i):zi(e,t,n,!0,r,i)}function qi(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)qi(e,t[s],n,r,i);else r=Wr(r)?!!r.capture:!!r,n=Yi(n),e&&e[Ci]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fi(s=e.g[t],n,r,i))&&(Di(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Wi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fi(t,n,r,i)),(n=-1<e?t[e]:null)&&Ki(n))}function Ki(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ci])Mi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Wi(t))?(Mi(n,e),0==n.h&&(n.src=null,t[Ui]=null)):Di(e)}}}function Gi(e){return e in Vi?Vi[e]:Vi[e]="on"+e}function Hi(e,t){if(e.fa)e=!0;else{t=new ki(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ki(e),e=n.call(r,t)}return e}function Wi(e){return(e=e[Ui])instanceof Li?e:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yi(e){return"function"===typeof e?e:(e[Qi]||(e[Qi]=function(t){return e.handleEvent(t)}),e[Qi])}function Ji(){ti.call(this),this.i=new Li(this),this.S=this,this.J=null}function $i(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new si(t,e);else if(t instanceof si)t.target=t.target||e;else{var i=t;Oi(t=new si(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=Xi(a,r,!0,t)&&i}if(i=Xi(a=t.g=e,r,!0,t)&&i,i=Xi(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Xi(a=t.g=n[s],r,!1,t)&&i}function Xi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&Mi(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}ei(Ji,ti),Ji.prototype[Ci]=!0,Ji.prototype.removeEventListener=function(e,t,n,r){qi(this,e,t,n,r)},Ji.prototype.N=function(){if(Ji.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Di(n[r]);delete t.g[e],t.h--}}this.J=null},Ji.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ji.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Zi=Gr.JSON.stringify;function es(){var e=os;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ts=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ns),(e=>e.reset()));class ns{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function is(e){Gr.setTimeout((()=>{throw e}),0)}let ss,as=!1,os=new class{constructor(){this.h=this.g=null}add(e,t){const n=ts.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ls=()=>{const e=Gr.Promise.resolve(void 0);ss=()=>{e.then(us)}};var us=()=>{for(var e;e=es();){try{e.h.call(e.g)}catch(n){is(n)}var t=ts;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}as=!1};function cs(e,t){Ji.call(this),this.h=e||1,this.g=t||Gr,this.j=Xr(this.qb,this),this.l=Date.now()}function hs(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ds(e,t,n){if("function"===typeof e)n&&(e=Xr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gr.setTimeout(e,t||0)}function fs(e){e.g=ds((()=>{e.g=null,e.i&&(e.i=!1,fs(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ei(cs,Ji),(zr=cs.prototype).ga=!1,zr.T=null,zr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$i(this,"tick"),this.ga&&(hs(this),this.start()))}},zr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zr.N=function(){cs.$.N.call(this),hs(this),delete this.g};class ps extends ti{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fs(this)}N(){super.N(),this.g&&(Gr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(e){ti.call(this),this.h=e,this.g={}}ei(ms,ti);var gs=[];function ys(e,t,n,r){Array.isArray(n)||(n&&(gs[0]=n.toString()),n=gs);for(var i=0;i<n.length;i++){var s=ji(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function vs(e){Ai(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ki(e)}),e),e.g={}}function ws(){this.g=!0}function bs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return Zi(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}ms.prototype.N=function(){ms.$.N.call(this),vs(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ws.prototype.Ea=function(){this.g=!1},ws.prototype.info=function(){};var Ss={},Is=null;function Es(){return Is=Is||new Ji}function _s(e){si.call(this,Ss.Ta,e)}function ks(e){const t=Es();$i(t,new _s(t))}function Ts(e,t){si.call(this,Ss.STAT_EVENT,e),this.stat=t}function Cs(e){const t=Es();$i(t,new Ts(t,e))}function xs(e,t){si.call(this,Ss.Ua,e),this.size=t}function Ns(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gr.setTimeout((function(){e()}),t)}Ss.Ta="serverreachability",ei(_s,si),Ss.STAT_EVENT="statevent",ei(Ts,si),Ss.Ua="timingevent",ei(xs,si);var Ds={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},As={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ps(){}function Rs(e){return e.h||(e.h=e.i())}function Os(){}Ps.prototype.h=null;var Ls,Ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fs(){si.call(this,"d")}function Us(){si.call(this,"c")}function Vs(){}function js(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ms(this),this.P=Bs,e=gi?125:void 0,this.V=new cs(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}ei(Fs,si),ei(Us,si),ei(Vs,Ps),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Ls=new Vs;var Bs=45e3,qs={},Ks={};function Gs(e,t,n){e.L=1,e.A=ca(sa(t)),e.u=n,e.S=!0,Hs(e,null)}function Hs(e,t){e.G=Date.now(),Js(e),e.B=sa(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ea(n.i,"t",r),e.o=0,n=e.l.J,e.h=new zs,e.g=ko(e.l,n?t:null,!e.u),0<e.O&&(e.M=new ps(Xr(e.Pa,e,e.g),e.O)),ys(e.U,e.g,"readystatechange",e.nb),t=e.I?Pi(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ks(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Ws(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Qs(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Ys(e,n),r==Ks){4==t&&(e.s=4,Cs(14),i=!1),bs(e.j,e.m,null,"[Incomplete Response]");break}if(r==qs){e.s=4,Cs(15),bs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}bs(e.j,e.m,r,null),ta(e,r)}Ws(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Cs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yo(t),t.M=!0,Cs(11))):(bs(e.j,e.m,n,"[Invalid Chunked Response]"),ea(e),Zs(e))}function Ys(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Ks:(n=Number(t.substring(n,r)),isNaN(n)?qs:(r+=1)+n>t.length?Ks:(t=t.slice(r,r+n),e.o=r+n,t))}function Js(e){e.Y=Date.now()+e.P,$s(e,e.P)}function $s(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ns(Xr(e.lb,e),t)}function Xs(e){e.C&&(Gr.clearTimeout(e.C),e.C=null)}function Zs(e){0==e.l.H||e.J||bo(e.l,e)}function ea(e){Xs(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hs(e.V),vs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ta(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Da(n.i,e)))if(!e.K&&Da(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;wo(n),lo(n)}go(n),Cs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ns(Xr(n.ib,n),6e3));if(1>=Na(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Io(n,11)}else if((e.K||n.g==e)&&wo(n),!oi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Aa(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ua(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=_o(r,r.J?r.pa:null,r.Y),a.K){Pa(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.C&&(Xs(o),Js(o)),r.g=a}else mo(r);0<n.j.length&&co(n)}else"stop"!=u[0]&&"close"!=u[0]||Io(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Io(n,7):oo(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}ks()}catch(u){}}function na(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Hr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Hr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Hr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(zr=js.prototype).setTimeout=function(e){this.P=e},zr.nb=function(e){e=e.target;const t=this.M;t&&3==to(e)?t.l():this.Pa(e)},zr.Pa=function(e){try{if(e==this.g)e:{const c=to(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||gi||this.g&&(this.h.h||this.g.ja()||no(this.g)))){this.J||4!=c||7==t||ks(),Xs(this);var n=this.g.da();this.ca=n;t:if(Ws(this)){var r=no(this.g);e="";var i=r.length,s=4==to(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ea(this),Zs(this);var a="";break t}this.h.i=new Gr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oi(o)){var u=o;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Cs(12),ea(this),Zs(this);break e}bs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,n)}this.S?(Qs(this,c,a),gi&&this.i&&3==c&&(ys(this.U,this.V,"tick",this.mb),this.V.start())):(bs(this.j,this.m,a,null),ta(this,a)),4==c&&ea(this),this.i&&!this.J&&(4==c?bo(this.l,this):(this.i=!1,Js(this)))}else(function(e){const t={};e=(e.g&&2<=to(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(oi(e[r]))continue;var n=rs(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Cs(12)):(this.s=0,Cs(13)),ea(this),Zs(this)}}}catch(c){}},zr.mb=function(){if(this.g){var e=to(this.g),t=this.g.ja();this.o<t.length&&(Xs(this),Qs(this,e,t),this.i&&4!=e&&Js(this))}},zr.cancel=function(){this.J=!0,ea(this)},zr.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ks(),Cs(17)),ea(this),this.s=2,Zs(this)):$s(this,this.Y-e)};var ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ia(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ia){this.h=e.h,aa(this,e.j),this.s=e.s,this.g=e.g,oa(this,e.m),this.l=e.l;var t=e.i,n=new wa;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),la(this,n),this.o=e.o}else e&&(t=String(e).match(ra))?(this.h=!1,aa(this,t[1]||"",!0),this.s=ha(t[2]||""),this.g=ha(t[3]||"",!0),oa(this,t[4]),this.l=ha(t[5]||"",!0),la(this,t[6]||"",!0),this.o=ha(t[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}function sa(e){return new ia(e)}function aa(e,t,n){e.j=n?ha(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function oa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function la(e,t,n){t instanceof wa?(e.i=t,function(e,t){t&&!e.j&&(ba(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Sa(this,t),Ea(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=da(t,ya)),e.i=new wa(t,e.h))}function ua(e,t,n){e.i.set(t,n)}function ca(e){return ua(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ha(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function da(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ia.prototype.toString=function(){var e=[],t=this.j;t&&e.push(da(t,pa,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(da(t,pa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(da(n,"/"==n.charAt(0)?ga:ma,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",da(n,va)),e.join("")};var pa=/[#\/\?@]/g,ma=/[#\?:]/g,ga=/[#\?]/g,ya=/[#\?@]/g,va=/#/g;function wa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ba(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Sa(e,t){ba(e),t=_a(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ia(e,t){return ba(e),t=_a(e,t),e.g.has(t)}function Ea(e,t,n){Sa(e,t),0<n.length&&(e.i=null,e.g.set(_a(e,t),ri(n)),e.h+=n.length)}function _a(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(zr=wa.prototype).add=function(e,t){ba(this),this.i=null,e=_a(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},zr.forEach=function(e,t){ba(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},zr.ta=function(){ba(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},zr.Z=function(e){ba(this);let t=[];if("string"===typeof e)Ia(this,e)&&(t=t.concat(this.g.get(_a(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},zr.set=function(e,t){return ba(this),this.i=null,Ia(this,e=_a(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},zr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},zr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var ka=class{constructor(e,t){this.g=e,this.map=t}};function Ta(e){this.l=e||Ca,Gr.PerformanceNavigationTiming?e=0<(e=Gr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gr.g&&Gr.g.Ka&&Gr.g.Ka()&&Gr.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ca=10;function xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Na(e){return e.h?1:e.g?e.g.size:0}function Da(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Aa(e,t){e.g?e.g.add(t):e.h=t}function Pa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ra(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ri(e.i)}Ta.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Oa,La=class{stringify(e){return Gr.JSON.stringify(e,void 0)}parse(e){return Gr.JSON.parse(e,void 0)}};function Ma(){this.g=new La}function Fa(e,t,n){const r=n||"";try{na(e,(function(e,n){let i=e;Wr(e)&&(i=Zi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(bI){throw t.push(r+"type="+encodeURIComponent("_badmap")),bI}}function Ua(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Va(e){this.l=e.ec||null,this.j=e.ob||!1}function ja(e,t){Ji.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=za,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ei(Va,Ps),Va.prototype.g=function(){return new ja(this.l,this.j)},Va.prototype.i=(Oa={},function(){return Oa}),ei(ja,Ji);var za=0;function Ba(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function qa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ka(e)}function Ka(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(zr=ja.prototype).open=function(e,t){if(this.readyState!=za)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ka(this)},zr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Gr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},zr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qa(this)),this.readyState=za},zr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Gr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ba(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},zr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qa(this):Ka(this),3==this.readyState&&Ba(this)}},zr.Za=function(e){this.g&&(this.response=this.responseText=e,qa(this))},zr.Ya=function(e){this.g&&(this.response=e,qa(this))},zr.ka=function(){this.g&&qa(this)},zr.setRequestHeader=function(e,t){this.v.append(e,t)},zr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},zr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ga=Gr.JSON.parse;function Ha(e){Ji.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Wa,this.L=this.M=!1}ei(Ha,Ji);var Wa="",Qa=/^https?$/i,Ya=["POST","PUT"];function Ja(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$a(e),Za(e)}function $a(e){e.F||(e.F=!0,$i(e,"complete"),$i(e,"error"))}function Xa(e){if(e.h&&"undefined"!=typeof Kr&&(!e.C[1]||4!=to(e)||2!=e.da()))if(e.v&&4==to(e))ds(e.La,0,e);else if($i(e,"readystatechange"),4==to(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(ra)[1]||null;!i&&Gr.self&&Gr.self.location&&(i=Gr.self.location.protocol.slice(0,-1)),r=!Qa.test(i?i.toLowerCase():"")}n=r}if(n)$i(e,"complete"),$i(e,"success");else{e.m=6;try{var s=2<to(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.da()+"]",$a(e)}}finally{Za(e)}}}function Za(e,t){if(e.g){eo(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||$i(e,"ready");try{n.onreadystatechange=r}catch(bI){}}}function eo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Gr.clearTimeout(e.A),e.A=null)}function to(e){return e.g?e.g.readyState:0}function no(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Wa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(cl){return null}}function ro(e){let t="";return Ai(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function io(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ro(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ua(e,t,n))}function so(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ao(e){this.Ga=0,this.j=[],this.l=new ws,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=so("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=so("baseRetryDelayMs",5e3,e),this.hb=so("retryDelaySeedMs",1e4,e),this.eb=so("forwardChannelMaxRetries",2,e),this.xa=so("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ta(e&&e.concurrentRequestLimit),this.Ja=new Ma,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function oo(e){if(uo(e),3==e.H){var t=e.W++,n=sa(e.I);if(ua(n,"SID",e.K),ua(n,"RID",t),ua(n,"TYPE","terminate"),fo(e,n),(t=new js(e,e.l,t)).L=2,t.A=ca(sa(n)),n=!1,Gr.navigator&&Gr.navigator.sendBeacon)try{n=Gr.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Gr.Image&&((new Image).src=t.A,n=!0),n||(t.g=ko(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Js(t)}Eo(e)}function lo(e){e.g&&(yo(e),e.g.cancel(),e.g=null)}function uo(e){lo(e),e.u&&(Gr.clearTimeout(e.u),e.u=null),wo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gr.clearTimeout(e.m),e.m=null)}function co(e){if(!xa(e.i)&&!e.m){e.m=!0;var t=e.Na;ss||ls(),as||(ss(),as=!0),os.add(t,e),e.C=0}}function ho(e,t){var n;n=t?t.m:e.W++;const r=sa(e.I);ua(r,"SID",e.K),ua(r,"RID",n),ua(r,"AID",e.V),fo(e,r),e.o&&e.s&&io(r,e.o,e.s),n=new js(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=po(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Aa(e.i,n),Gs(n,r,t)}function fo(e,t){e.na&&Ai(e.na,(function(e,n){ua(t,n,e)})),e.h&&na({},(function(e,n){ua(t,n,e)}))}function po(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Xr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Fa(o,e,"req"+n+"_")}catch(Cu){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function mo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ss||ls(),as||(ss(),as=!0),os.add(t,e),e.A=0}}function go(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ns(Xr(e.Ma,e),So(e,e.A)),e.A++,!0)}function yo(e){null!=e.B&&(Gr.clearTimeout(e.B),e.B=null)}function vo(e){e.g=new js(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sa(e.wa);ua(t,"RID","rpc"),ua(t,"SID",e.K),ua(t,"AID",e.V),ua(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ua(t,"TO",e.qa),ua(t,"TYPE","xmlhttp"),fo(e,t),e.o&&e.s&&io(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=ca(sa(t)),n.u=null,n.S=!0,Hs(n,e)}function wo(e){null!=e.v&&(Gr.clearTimeout(e.v),e.v=null)}function bo(e,t){var n=null;if(e.g==t){wo(e),yo(e),e.g=null;var r=2}else{if(!Da(e.i,t))return;n=t.F,Pa(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;$i(r=Es(),new xs(r,n)),co(e)}else mo(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Na(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ns(Xr(e.Na,e,t),So(e,e.C)),e.C++,!0))}(e,t)||2==r&&go(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Io(e,5);break;case 4:Io(e,10);break;case 3:Io(e,6);break;default:Io(e,2)}}function So(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Io(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Xr(e.pb,e);n||(n=new ia("//www.google.com/images/cleardot.gif"),Gr.location&&"http"==Gr.location.protocol||aa(n,"https"),ca(n)),function(e,t){const n=new ws;if(Gr.Image){const r=new Image;r.onload=Zr(Ua,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zr(Ua,n,r,"TestLoadImage: error",!1,t),r.onabort=Zr(Ua,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zr(Ua,n,r,"TestLoadImage: timeout",!1,t),Gr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cs(2);e.H=0,e.h&&e.h.za(t),Eo(e),uo(e)}function Eo(e){if(e.H=0,e.ma=[],e.h){const t=Ra(e.i);0==t.length&&0==e.j.length||(ii(e.ma,t),ii(e.ma,e.j),e.i.i.length=0,ri(e.j),e.j.length=0),e.h.ya()}}function _o(e,t,n){var r=n instanceof ia?sa(n):new ia(n);if(""!=r.g)t&&(r.g=t+"."+r.g),oa(r,r.m);else{var i=Gr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ia(null);r&&aa(s,r),t&&(s.g=t),i&&oa(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ua(r,n,t),ua(r,"VER",e.ra),fo(e,r),r}function ko(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ha(new Va({ob:n})):new Ha(e.va)).Oa(e.J),t}function To(){}function Co(){if(pi&&!(10<=Number(_i)))throw Error("Environmental error: no available transport.")}function xo(e,t){Ji.call(this),this.g=new ao(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!oi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!oi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ao(this)}function No(e){Fs.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Do(){Us.call(this),this.status=1}function Ao(e){this.g=e}function Po(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ro(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Oo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(zr=Ha.prototype).Oa=function(e){this.M=e},zr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ls.g(),this.C=this.u?Rs(this.u):Rs(Ls),this.g.onreadystatechange=Xr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Ja(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Gr.FormData&&e instanceof Gr.FormData,!(0<=ni(Ya,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eo(this),0<this.B&&((this.L=function(e){return pi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.ua,this)):this.A=ds(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ja(this,s)}},zr.ua=function(){"undefined"!=typeof Kr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$i(this,"timeout"),this.abort(8))},zr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$i(this,"complete"),$i(this,"abort"),Za(this))},zr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Za(this,!0)),Ha.$.N.call(this)},zr.La=function(){this.s||(this.G||this.v||this.l?Xa(this):this.kb())},zr.kb=function(){Xa(this)},zr.isActive=function(){return!!this.g},zr.da=function(){try{return 2<to(this)?this.g.status:-1}catch(Oa){return-1}},zr.ja=function(){try{return this.g?this.g.responseText:""}catch(Oa){return""}},zr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ga(t)}},zr.Ia=function(){return this.m},zr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(zr=ao.prototype).ra=8,zr.H=1,zr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new js(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Pi(s),Oi(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=po(this,i,t),ua(n=sa(this.I),"RID",e),ua(n,"CVER",22),this.F&&ua(n,"X-HTTP-Session-Id",this.F),fo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ro(s)))+"&"+t:this.o&&io(n,this.o,s)),Aa(this.i,i),this.bb&&ua(n,"TYPE","init"),this.P?(ua(n,"$req",t),ua(n,"SID","null"),i.aa=!0,Gs(i,n,null)):Gs(i,n,t),this.H=2}}else 3==this.H&&(e?ho(this,e):0==this.j.length||xa(this.i)||ho(this))},zr.Ma=function(){if(this.u=null,vo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ns(Xr(this.jb,this),e)}},zr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cs(10),lo(this),vo(this))},zr.ib=function(){null!=this.v&&(this.v=null,lo(this),go(this),Cs(19))},zr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Cs(2)):(this.l.info("Failed to ping google.com"),Cs(1))},zr.isActive=function(){return!!this.h&&this.h.isActive(this)},(zr=To.prototype).Ba=function(){},zr.Aa=function(){},zr.za=function(){},zr.ya=function(){},zr.isActive=function(){return!0},zr.Va=function(){},Co.prototype.g=function(e,t){return new xo(e,t)},ei(xo,Ji),xo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Cs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=_o(e,null,e.Y),co(e)},xo.prototype.close=function(){oo(this.g)},xo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Zi(e),e=n);t.j.push(new ka(t.fb++,e)),3==t.H&&co(t)},xo.prototype.N=function(){this.g.h=null,delete this.j,oo(this.g),delete this.g,xo.$.N.call(this)},ei(No,Fs),ei(Do,Us),ei(Ao,To),Ao.prototype.Ba=function(){$i(this.g,"a")},Ao.prototype.Aa=function(e){$i(this.g,new No(e))},Ao.prototype.za=function(e){$i(this.g,new Do)},Ao.prototype.ya=function(){$i(this.g,"b")},ei(Po,(function(){this.blockSize=-1})),Po.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Po.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ro(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ro(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ro(this,r),i=0;break}}this.h=i,this.i+=t},Po.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Lo={};function Mo(e){return-128<=e&&128>e?function(e,t){var n=Lo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Oo([0|e],0>e?-1:0)})):new Oo([0|e],0>e?-1:0)}function Fo(e){if(isNaN(e)||!isFinite(e))return Vo;if(0>e)return Ko(Fo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Uo;return new Oo(t,0)}var Uo=4294967296,Vo=Mo(0),jo=Mo(1),zo=Mo(16777216);function Bo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function qo(e){return-1==e.h}function Ko(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Oo(n,~e.h).add(jo)}function Go(e,t){return e.add(Ko(t))}function Ho(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Wo(e,t){this.g=e,this.h=t}function Qo(e,t){if(Bo(t))throw Error("division by zero");if(Bo(e))return new Wo(Vo,Vo);if(qo(e))return t=Qo(Ko(e),t),new Wo(Ko(t.g),Ko(t.h));if(qo(t))return t=Qo(e,Ko(t)),new Wo(Ko(t.g),t.h);if(30<e.g.length){if(qo(e)||qo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=jo,r=t;0>=r.X(e);)n=Yo(n),r=Yo(r);var i=Jo(n,1),s=Jo(r,1);for(r=Jo(r,2),n=Jo(n,2);!Bo(r);){var a=s.add(r);0>=a.X(e)&&(i=i.add(n),s=a),r=Jo(r,1),n=Jo(n,1)}return t=Go(e,i.R(t)),new Wo(i,t)}for(i=Vo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=Fo(n)).R(t);qo(a)||0<a.X(e);)a=(s=Fo(n-=r)).R(t);Bo(s)&&(s=jo),i=i.add(s),e=Go(e,a)}return new Wo(i,e)}function Yo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Oo(n,e.h)}function Jo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Oo(i,e.h)}(zr=Oo.prototype).ea=function(){if(qo(this))return-Ko(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Uo+r)*t,t*=Uo}return e},zr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Bo(this))return"0";if(qo(this))return"-"+Ko(this).toString(e);for(var t=Fo(Math.pow(e,6)),n=this,r="";;){var i=Qo(n,t).g,s=((0<(n=Go(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Bo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},zr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},zr.X=function(e){return qo(e=Go(this,e))?-1:Bo(e)?0:1},zr.abs=function(){return qo(this)?Ko(this):this},zr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new Oo(n,-2147483648&n[n.length-1]?-1:0)},zr.R=function(e){if(Bo(this)||Bo(e))return Vo;if(qo(this))return qo(e)?Ko(this).R(Ko(e)):Ko(Ko(this).R(e));if(qo(e))return Ko(this.R(Ko(e)));if(0>this.X(zo)&&0>e.X(zo))return Fo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),o=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,Ho(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ho(n,2*r+2*i+1),n[2*r+2*i+1]+=a*o,Ho(n,2*r+2*i+1),n[2*r+2*i+2]+=s*o,Ho(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Oo(n,0)},zr.gb=function(e){return Qo(this,e).h},zr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Oo(n,this.h&e.h)},zr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Oo(n,this.h|e.h)},zr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Oo(n,this.h^e.h)},Co.prototype.createWebChannel=Co.prototype.g,xo.prototype.send=xo.prototype.u,xo.prototype.open=xo.prototype.m,xo.prototype.close=xo.prototype.close,Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,As.COMPLETE="complete",Os.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",Ji.prototype.listen=Ji.prototype.O,Ha.prototype.listenOnce=Ha.prototype.P,Ha.prototype.getLastError=Ha.prototype.Sa,Ha.prototype.getLastErrorCode=Ha.prototype.Ia,Ha.prototype.getStatus=Ha.prototype.da,Ha.prototype.getResponseJson=Ha.prototype.Wa,Ha.prototype.getResponseText=Ha.prototype.ja,Ha.prototype.send=Ha.prototype.ha,Ha.prototype.setWithCredentials=Ha.prototype.Oa,Po.prototype.digest=Po.prototype.l,Po.prototype.reset=Po.prototype.reset,Po.prototype.update=Po.prototype.j,Oo.prototype.add=Oo.prototype.add,Oo.prototype.multiply=Oo.prototype.R,Oo.prototype.modulo=Oo.prototype.gb,Oo.prototype.compare=Oo.prototype.X,Oo.prototype.toNumber=Oo.prototype.ea,Oo.prototype.toString=Oo.prototype.toString,Oo.prototype.getBits=Oo.prototype.D,Oo.fromNumber=Fo,Oo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ko(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Fo(Math.pow(n,8)),i=Vo,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=Fo(Math.pow(n,a)),i=i.R(a).add(Fo(o))):i=(i=i.R(r)).add(Fo(o))}return i};var $o=qr.createWebChannelTransport=function(){return new Co},Xo=qr.getStatEventTarget=function(){return Es()},Zo=qr.ErrorCode=Ds,el=qr.EventType=As,tl=qr.Event=Ss,nl=qr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rl=(qr.FetchXmlHttpFactory=Va,qr.WebChannel=Os),il=qr.XhrIo=Ha,sl=qr.Md5=Po,al=qr.Integer=Oo;const ol="@firebase/firestore";class ll{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ll.UNAUTHENTICATED=new ll(null),ll.GOOGLE_CREDENTIALS=new ll("google-credentials-uid"),ll.FIRST_PARTY=new ll("first-party-uid"),ll.MOCK_USER=new ll("mock-user");let ul="10.8.1";const cl=new gt("@firebase/firestore");function hl(){return cl.logLevel}function dl(e){if(cl.logLevel<=ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.debug("Firestore (".concat(ul,"): ").concat(e),...i)}}function fl(e){if(cl.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.error("Firestore (".concat(ul,"): ").concat(e),...i)}}function pl(e){if(cl.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.warn("Firestore (".concat(ul,"): ").concat(e),...i)}}function ml(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function gl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ul,") INTERNAL ASSERTION FAILED: ")+e;throw fl(t),new Error(t)}function yl(e,t){e||gl()}function vl(e,t){return e}const wl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bl extends Ke{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Sl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class El{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ll.UNAUTHENTICATED)))}shutdown(){}}class _l{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kl{constructor(e){this.t=e,this.currentUser=ll.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Sl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{dl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(dl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(dl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(yl("string"==typeof t.accessToken),new Il(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yl(null===e||"string"==typeof e),new ll(e)}}class Tl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ll.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Cl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Tl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ll.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&dl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,dl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{dl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):dl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(yl("string"==typeof e.token),this.R=e.token,new xl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Dl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Al{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Dl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Pl(e,t){return e<t?-1:e>t?1:0}function Rl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ol(e){return e+"\0"}class Ll{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bl(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bl(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bl(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bl(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ll.fromMillis(Date.now())}static fromDate(e){return Ll.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ll(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pl(this.nanoseconds,e.nanoseconds):Pl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ml{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ml(e)}static min(){return new Ml(new Ll(0,0))}static max(){return new Ml(new Ll(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fl{constructor(e,t,n){void 0===t?t=0:t>e.length&&gl(),void 0===n?n=e.length-t:n>e.length-t&&gl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Fl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ul extends Fl{construct(e,t,n){return new Ul(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new bl(wl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ul(e)}static emptyPath(){return new Ul([])}}const Vl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jl extends Fl{construct(e,t,n){return new jl(e,t,n)}static isValidIdentifier(e){return Vl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new bl(wl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new bl(wl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bl(wl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new bl(wl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jl(t)}static emptyPath(){return new jl([])}}class zl{constructor(e){this.path=e}static fromPath(e){return new zl(Ul.fromString(e))}static fromName(e){return new zl(Ul.fromString(e).popFirst(5))}static empty(){return new zl(Ul.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ul.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ul.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zl(new Ul(e.slice()))}}class Bl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ql(e){return e.fields.find((e=>2===e.kind))}function Kl(e){return e.fields.filter((e=>2!==e.kind))}Bl.UNKNOWN_ID=-1;class Gl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hl(0,Yl.min())}}function Wl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ml.fromTimestamp(1e9===r?new Ll(n+1,0):new Ll(n,r));return new Yl(i,zl.empty(),t)}function Ql(e){return new Yl(e.readTime,e.key,-1)}class Yl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yl(Ml.min(),zl.empty(),-1)}static max(){return new Yl(Ml.max(),zl.empty(),-1)}}function Jl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zl.comparator(e.documentKey,t.documentKey),0!==n?n:Pl(e.largestBatchId,t.largestBatchId))}const $l="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zl(e){if(e.code!==wl.FAILED_PRECONDITION||e.message!==$l)throw e;dl("LocalStore","Unexpectedly lost primary lease")}class eu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new eu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof eu?t:eu.resolve(t)}catch(e){return eu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):eu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):eu.reject(t)}static resolve(e){return new eu(((t,n)=>{t(e)}))}static reject(e){return new eu(((t,n)=>{n(e)}))}static waitFor(e){return new eu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=eu.resolve(!1);for(const n of e)t=t.next((e=>e?eu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new eu(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new eu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class tu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Sl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new iu(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=uu(t.target.error);this.V.reject(new iu(e,n))}}static open(e,t,n,r){try{return new tu(t,e.transaction(r,n))}catch(e){throw new iu(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(dl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new au(t)}}class nu{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===nu.S(Ve())&&fl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dl("SimpleDb","Removing database:",e),ou(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Be())return!1;if(nu.C())return!0;const e=Ve(),t=nu.S(e),n=0<t&&t<10,r=nu.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(dl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new bl(wl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new bl(wl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new iu(e,r))},r.onupgradeneeded=e=>{dl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{dl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=tu.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),eu.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(dl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ru{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ou(this.k.delete())}}class iu extends bl{constructor(e,t){super(wl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function su(e){return"IndexedDbTransactionError"===e.name}class au{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(dl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(dl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ou(n)}add(e){return dl("SimpleDb","ADD",this.store.name,e,e),ou(this.store.add(e))}get(e){return ou(this.store.get(e)).next((t=>(void 0===t&&(t=null),dl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return dl("SimpleDb","DELETE",this.store.name,e),ou(this.store.delete(e))}count(){return dl("SimpleDb","COUNT",this.store.name),ou(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new eu(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new eu(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){dl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new eu(((n,r)=>{t.onerror=e=>{const t=uu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new eu(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ru(i),a=t(i.primaryKey,i.value,s);if(a instanceof eu){const e=a.catch((e=>(s.done(),eu.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>eu.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ou(e){return new eu(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=uu(e.target.error);n(t)}}))}let lu=!1;function uu(e){const t=nu.S(Ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new bl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lu||(lu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class cu{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){dl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{dl("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){su(e)?dl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Zl(e)}await this.ee(6e4)}))}}class hu{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return eu.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return dl("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(dl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ql(t);Jl(r,n)>0&&(n=r)})),new Yl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class du{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function fu(e){return null==e}function pu(e){return 0===e&&1/e==-1/0}function mu(e){return"number"==typeof e&&Number.isInteger(e)&&!pu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function gu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vu(t)),t=yu(e.get(n),t);return vu(t)}function yu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function vu(e){return e+"\x01\x01"}function wu(e){const t=e.length;if(yl(t>=2),2===t)return yl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ul.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&gl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:gl()}s=t+2}return new Ul(r)}du._e=-1;const bu=["userId","batchId"];function Su(e,t){return[e,gu(t)]}function Iu(e,t,n){return[e,gu(t),n]}const Eu={},_u=["prefixPath","collectionGroup","readTime","documentId"],ku=["prefixPath","collectionGroup","documentId"],Tu=["collectionGroup","readTime","prefixPath","documentId"],Cu=["canonicalId","targetId"],xu=["targetId","path"],Nu=["path","targetId"],Du=["collectionId","parent"],Au=["indexId","uid"],Pu=["uid","sequenceNumber"],Ru=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ou=["indexId","uid","orderedDocumentKey"],Lu=["userId","collectionPath","documentId"],Mu=["userId","collectionPath","largestBatchId"],Fu=["userId","collectionGroup","largestBatchId"],Uu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vu=[...Uu,"documentOverlays"],ju=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zu=ju,Bu=[...zu,"indexConfiguration","indexState","indexEntries"];class qu extends Xl{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Ku(e,t){const n=vl(e);return nu.M(n.ae,t)}function Gu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Hu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Qu{constructor(e,t){this.comparator=e,this.root=t||Ju.EMPTY}insert(e,t){return new Qu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ju.BLACK,null,null))}remove(e){return new Qu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ju.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ju{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ju.RED,this.left=null!=r?r:Ju.EMPTY,this.right=null!=i?i:Ju.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ju(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ju.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ju.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ju.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ju.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gl();if(this.right.isRed())throw gl();const e=this.left.check();if(e!==this.right.check())throw gl();return e+(this.isRed()?0:1)}}Ju.EMPTY=null,Ju.RED=!0,Ju.BLACK=!1,Ju.EMPTY=new class{constructor(){this.size=0}get key(){throw gl()}get value(){throw gl()}get color(){throw gl()}get left(){throw gl()}get right(){throw gl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ju(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $u{constructor(e){this.comparator=e,this.data=new Qu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xu(this.data.getIterator())}getIteratorFrom(e){return new Xu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof $u))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $u(this.comparator);return t.data=e,t}}class Xu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zu(e){return e.hasNext()?e.getNext():void 0}class ec{constructor(e){this.fields=e,e.sort(jl.comparator)}static empty(){return new ec([])}unionWith(e){let t=new $u(jl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ec(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class tc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new tc("Invalid base64 string: "+e):e}}(e);return new nc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new nc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nc.EMPTY_BYTE_STRING=new nc("");const rc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ic(e){if(yl(!!e),"string"==typeof e){let t=0;const n=rc.exec(e);if(yl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sc(e.seconds),nanos:sc(e.nanos)}}function sc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ac(e){return"string"==typeof e?nc.fromBase64String(e):nc.fromUint8Array(e)}function oc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lc(e){const t=e.mapValue.fields.__previous_value__;return oc(t)?lc(t):t}function uc(e){const t=ic(e.mapValue.fields.__local_write_time__.timestampValue);return new Ll(t.seconds,t.nanos)}class cc{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class hc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}const dc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fc={nullValue:"NULL_VALUE"};function pc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oc(e)?4:xc(e)?9007199254740991:10:gl()}function mc(e,t){if(e===t)return!0;const n=pc(e);if(n!==pc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return uc(e).isEqual(uc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ic(e.timestampValue),r=ic(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ac(e.bytesValue).isEqual(ac(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sc(e.geoPointValue.latitude)===sc(t.geoPointValue.latitude)&&sc(e.geoPointValue.longitude)===sc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sc(e.integerValue)===sc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=sc(e.doubleValue),r=sc(t.doubleValue);return n===r?pu(n)===pu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rl(e.arrayValue.values||[],t.arrayValue.values||[],mc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gu(n)!==Gu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!mc(n[i],r[i])))return!1;return!0}(e,t);default:return gl()}}function gc(e,t){return void 0!==(e.values||[]).find((e=>mc(e,t)))}function yc(e,t){if(e===t)return 0;const n=pc(e),r=pc(t);if(n!==r)return Pl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=sc(e.integerValue||e.doubleValue),r=sc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vc(e.timestampValue,t.timestampValue);case 4:return vc(uc(e),uc(t));case 5:return Pl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ac(e),r=ac(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Pl(n[i],r[i]);if(0!==e)return e}return Pl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Pl(sc(e.latitude),sc(t.latitude));return 0!==n?n:Pl(sc(e.longitude),sc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=yc(n[i],r[i]);if(e)return e}return Pl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===dc.mapValue&&t===dc.mapValue)return 0;if(e===dc.mapValue)return 1;if(t===dc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Pl(r[a],s[a]);if(0!==e)return e;const t=yc(n[r[a]],i[s[a]]);if(0!==t)return t}return Pl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw gl()}}function vc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pl(e,t);const n=ic(e),r=ic(t),i=Pl(n.seconds,r.seconds);return 0!==i?i:Pl(n.nanos,r.nanos)}function wc(e){return bc(e)}function bc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ic(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ac(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=bc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(bc(e.fields[i]));return n+"}"}(e.mapValue):gl()}function Sc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ic(e){return!!e&&"integerValue"in e}function Ec(e){return!!e&&"arrayValue"in e}function _c(e){return!!e&&"nullValue"in e}function kc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Tc(e){return!!e&&"mapValue"in e}function Cc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Hu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Cc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nc(e){return"nullValue"in e?fc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Sc(hc.empty(),zl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gl()}function Dc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Sc(hc.empty(),zl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?dc:gl()}function Ac(e,t){const n=yc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Pc(e,t){const n=yc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Rc{constructor(e){this.value=e}static empty(){return new Rc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=jl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Cc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Tc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Hu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Rc(Cc(this.value))}}function Oc(e){const t=[];return Hu(e.fields,((e,n)=>{const r=new jl([e]);if(Tc(n)){const e=Oc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ec(t)}class Lc{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Lc(e,0,Ml.min(),Ml.min(),Ml.min(),Rc.empty(),0)}static newFoundDocument(e,t,n,r){return new Lc(e,1,t,Ml.min(),n,r,0)}static newNoDocument(e,t){return new Lc(e,2,t,Ml.min(),Ml.min(),Rc.empty(),0)}static newUnknownDocument(e,t){return new Lc(e,3,t,Ml.min(),Ml.min(),Rc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ml.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ml.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Lc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Mc{constructor(e,t){this.position=e,this.inclusive=t}}function Fc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?zl.comparator(zl.fromName(a.referenceValue),n.key):yc(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Uc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!mc(e.position[n],t.position[n]))return!1;return!0}class Vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function jc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class zc{}class Bc extends zc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Xc(e,t,n):"array-contains"===t?new nh(e,n):"in"===t?new rh(e,n):"not-in"===t?new ih(e,n):"array-contains-any"===t?new sh(e,n):new Bc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Zc(e,n):new eh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yc(t,this.value)):null!==t&&pc(this.value)===pc(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qc extends zc{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new qc(e,t)}matches(e){return Kc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Kc(e){return"and"===e.op}function Gc(e){return"or"===e.op}function Hc(e){return Wc(e)&&Kc(e)}function Wc(e){for(const t of e.filters)if(t instanceof qc)return!1;return!0}function Qc(e){if(e instanceof Bc)return e.field.canonicalString()+e.op.toString()+wc(e.value);if(Hc(e))return e.filters.map((e=>Qc(e))).join(",");{const t=e.filters.map((e=>Qc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Yc(e,t){return e instanceof Bc?function(e,t){return t instanceof Bc&&e.op===t.op&&e.field.isEqual(t.field)&&mc(e.value,t.value)}(e,t):e instanceof qc?function(e,t){return t instanceof qc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Yc(n,t.filters[r])),!0)}(e,t):void gl()}function Jc(e,t){const n=e.filters.concat(t);return qc.create(n,e.op)}function $c(e){return e instanceof Bc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wc(e.value))}(e):e instanceof qc?function(e){return e.op.toString()+" {"+e.getFilters().map($c).join(" ,")+"}"}(e):"Filter"}class Xc extends Bc{constructor(e,t,n){super(e,t,n),this.key=zl.fromName(n.referenceValue)}matches(e){const t=zl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zc extends Bc{constructor(e,t){super(e,"in",t),this.keys=th("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eh extends Bc{constructor(e,t){super(e,"not-in",t),this.keys=th("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function th(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>zl.fromName(e.referenceValue)))}class nh extends Bc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ec(t)&&gc(t.arrayValue,this.value)}}class rh extends Bc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gc(this.value.arrayValue,t)}}class ih extends Bc{constructor(e,t){super(e,"not-in",t)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gc(this.value.arrayValue,t)}}class sh extends Bc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>gc(this.value.arrayValue,e)))}}class ah{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ce=null}}function oh(e){return new ah(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function lh(e){const t=vl(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Qc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),fu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>wc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>wc(e))).join(",")),t.ce=e}return t.ce}function uh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uc(e.startAt,t.startAt)&&Uc(e.endAt,t.endAt)}function ch(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function hh(e,t){return e.filters.filter((e=>e instanceof Bc&&e.field.isEqual(t)))}function dh(e,t,n){let r=fc,i=!0;for(const s of hh(e,t)){let e=fc,t=!0;switch(s.op){case"<":case"<=":e=Nc(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=fc}Ac({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ac({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function fh(e,t,n){let r=dc,i=!0;for(const s of hh(e,t)){let e=dc,t=!0;switch(s.op){case">=":case">":e=Dc(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=dc}Pc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Pc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ph{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function mh(e,t,n,r,i,s,a,o){return new ph(e,t,n,r,i,s,a,o)}function gh(e){return new ph(e)}function yh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vh(e){return null!==e.collectionGroup}function wh(e){const t=vl(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new $u(jl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Vc(r,n))})),e.has(jl.keyField().canonicalString())||t.le.push(new Vc(jl.keyField(),n))}return t.le}function bh(e){const t=vl(e);return t.he||(t.he=Sh(t,wh(e))),t.he}function Sh(e,t){if("F"===e.limitType)return oh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Vc(e.field,t)}));const n=e.endAt?new Mc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Mc(e.startAt.position,e.startAt.inclusive):null;return oh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ih(e,t){const n=e.filters.concat([t]);return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Eh(e,t,n){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _h(e,t){return uh(bh(e),bh(t))&&e.limitType===t.limitType}function kh(e){return"".concat(lh(bh(e)),"|lt:").concat(e.limitType)}function Th(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>$c(e))).join(", "),"]")),fu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>wc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>wc(e))).join(",")),"Target(".concat(t,")")}(bh(e)),"; limitType=").concat(e.limitType,")")}function Ch(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of wh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Fc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wh(e),t))&&!(e.endAt&&!function(e,t,n){const r=Fc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wh(e),t))}(e,t)}function xh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Nh(e){return(t,n)=>{let r=!1;for(const i of wh(e)){const e=Dh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Dh(e,t,n){const r=e.field.isKeyField()?zl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yc(r,i):gl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gl()}}class Ah{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Wu(this.inner)}size(){return this.innerSize}}const Ph=new Qu(zl.comparator);function Rh(){return Ph}const Oh=new Qu(zl.comparator);function Lh(){let e=Oh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Mh(e){let t=Oh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Fh(){return Vh()}function Uh(){return Vh()}function Vh(){return new Ah((e=>e.toString()),((e,t)=>e.isEqual(t)))}const jh=new Qu(zl.comparator),zh=new $u(zl.comparator);function Bh(){let e=zh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const qh=new $u(Pl);function Kh(){return qh}function Gh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(t)?"-0":t}}function Hh(e){return{integerValue:""+e}}function Wh(e,t){return mu(t)?Hh(t):Gh(e,t)}class Qh{constructor(){this._=void 0}}function Yh(e,t,n){return e instanceof Xh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&oc(t)&&(t=lc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zh?ed(e,t):e instanceof td?nd(e,t):function(e,t){const n=$h(e,t),r=id(n)+id(e.Ie);return Ic(n)&&Ic(e.Ie)?Hh(r):Gh(e.serializer,r)}(e,t)}function Jh(e,t,n){return e instanceof Zh?ed(e,t):e instanceof td?nd(e,t):n}function $h(e,t){return e instanceof rd?function(e){return Ic(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xh extends Qh{}class Zh extends Qh{constructor(e){super(),this.elements=e}}function ed(e,t){const n=sd(t);for(const r of e.elements)n.some((e=>mc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class td extends Qh{constructor(e){super(),this.elements=e}}function nd(e,t){let n=sd(t);for(const r of e.elements)n=n.filter((e=>!mc(e,r)));return{arrayValue:{values:n}}}class rd extends Qh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function id(e){return sc(e.integerValue||e.doubleValue)}function sd(e){return Ec(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ad{constructor(e,t){this.field=e,this.transform=t}}class od{constructor(e,t){this.version=e,this.transformResults=t}}class ld{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ld}static exists(e){return new ld(void 0,e)}static updateTime(e){return new ld(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ud(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class cd{}function hd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sd(e.key,ld.none()):new gd(e.key,e.data,ld.none());{const n=e.data,r=Rc.empty();let i=new $u(jl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new yd(e.key,r,new ec(i.toArray()),ld.none())}}function dd(e,t,n){e instanceof gd?function(e,t,n){const r=e.value.clone(),i=wd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yd?function(e,t,n){if(!ud(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=wd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function fd(e,t,n,r){return e instanceof gd?function(e,t,n,r){if(!ud(e.precondition,t))return n;const i=e.value.clone(),s=bd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof yd?function(e,t,n,r){if(!ud(e.precondition,t))return n;const i=bd(e.fieldTransforms,r,t),s=t.data;return s.setAll(vd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ud(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function pd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=$h(r.transform,e||null);null!=i&&(null===n&&(n=Rc.empty()),n.set(r.field,i))}return n||null}function md(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zh&&t instanceof Zh||e instanceof td&&t instanceof td?Rl(e.elements,t.elements,mc):e instanceof rd&&t instanceof rd?mc(e.Ie,t.Ie):e instanceof Xh&&t instanceof Xh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gd extends cd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yd extends cd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function wd(e,t,n){const r=new Map;yl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Jh(a,o,n[i]))}return r}function bd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Yh(e,s,t))}return r}class Sd extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Id extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ed{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&dd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=fd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=fd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Uh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=hd(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Ml.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bh())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((e,t)=>md(e,t)))&&Rl(this.baseMutations,e.baseMutations,((e,t)=>md(e,t)))}}class _d{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){yl(e.mutations.length===n.length);let r=jh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new _d(e,t,n,r)}}class kd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Td{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cd,xd;function Nd(e){switch(e){default:return gl();case wl.CANCELLED:case wl.UNKNOWN:case wl.DEADLINE_EXCEEDED:case wl.RESOURCE_EXHAUSTED:case wl.INTERNAL:case wl.UNAVAILABLE:case wl.UNAUTHENTICATED:return!1;case wl.INVALID_ARGUMENT:case wl.NOT_FOUND:case wl.ALREADY_EXISTS:case wl.PERMISSION_DENIED:case wl.FAILED_PRECONDITION:case wl.ABORTED:case wl.OUT_OF_RANGE:case wl.UNIMPLEMENTED:case wl.DATA_LOSS:return!0}}function Dd(e){if(void 0===e)return fl("GRPC error has no .code"),wl.UNKNOWN;switch(e){case Cd.OK:return wl.OK;case Cd.CANCELLED:return wl.CANCELLED;case Cd.UNKNOWN:return wl.UNKNOWN;case Cd.DEADLINE_EXCEEDED:return wl.DEADLINE_EXCEEDED;case Cd.RESOURCE_EXHAUSTED:return wl.RESOURCE_EXHAUSTED;case Cd.INTERNAL:return wl.INTERNAL;case Cd.UNAVAILABLE:return wl.UNAVAILABLE;case Cd.UNAUTHENTICATED:return wl.UNAUTHENTICATED;case Cd.INVALID_ARGUMENT:return wl.INVALID_ARGUMENT;case Cd.NOT_FOUND:return wl.NOT_FOUND;case Cd.ALREADY_EXISTS:return wl.ALREADY_EXISTS;case Cd.PERMISSION_DENIED:return wl.PERMISSION_DENIED;case Cd.FAILED_PRECONDITION:return wl.FAILED_PRECONDITION;case Cd.ABORTED:return wl.ABORTED;case Cd.OUT_OF_RANGE:return wl.OUT_OF_RANGE;case Cd.UNIMPLEMENTED:return wl.UNIMPLEMENTED;case Cd.DATA_LOSS:return wl.DATA_LOSS;default:return gl()}}(xd=Cd||(Cd={}))[xd.OK=0]="OK",xd[xd.CANCELLED=1]="CANCELLED",xd[xd.UNKNOWN=2]="UNKNOWN",xd[xd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xd[xd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xd[xd.NOT_FOUND=5]="NOT_FOUND",xd[xd.ALREADY_EXISTS=6]="ALREADY_EXISTS",xd[xd.PERMISSION_DENIED=7]="PERMISSION_DENIED",xd[xd.UNAUTHENTICATED=16]="UNAUTHENTICATED",xd[xd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xd[xd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xd[xd.ABORTED=10]="ABORTED",xd[xd.OUT_OF_RANGE=11]="OUT_OF_RANGE",xd[xd.UNIMPLEMENTED=12]="UNIMPLEMENTED",xd[xd.INTERNAL=13]="INTERNAL",xd[xd.UNAVAILABLE=14]="UNAVAILABLE",xd[xd.DATA_LOSS=15]="DATA_LOSS";let Ad=null;function Pd(){return new TextEncoder}const Rd=new al([4294967295,4294967295],0);function Od(e){const t=Pd().encode(e),n=new sl;return n.update(t),new Uint8Array(n.digest())}function Ld(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new al([n,r],0),new al([i,s],0)]}class Md{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Fd("Invalid padding: ".concat(t));if(n<0)throw new Fd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Fd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Fd("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=al.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(al.fromNumber(n)));return 1===r.compare(Rd)&&(r=new al([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Od(e),[n,r]=Ld(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Md(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Od(e),[n,r]=Ld(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Fd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ud{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ud(Ml.min(),r,new Qu(Pl),Rh(),Bh())}}class Vd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Vd(n,t,Bh(),Bh(),Bh())}}class jd{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class zd{constructor(e,t){this.targetId=e,this.fe=t}}class Bd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class qd{constructor(){this.ge=0,this.pe=Hd(),this.ye=nc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Bh(),t=Bh(),n=Bh();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gl()}})),new Vd(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Hd()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,yl(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Kd{constructor(e){this.Le=e,this.ke=new Map,this.qe=Rh(),this.Qe=Gd(),this.Ke=new Qu(Pl)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:gl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(ch(i))if(0===n){const e=new zl(i.path);this.We(t,e,Lc.newNoDocument(e,Ml.min()))}else yl(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Ad||Ad.tt(function(e,t,n,r,i){var s,a,o,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=ac(n).toUint8Array()}catch(e){if(e instanceof tc)return pl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Md(s,r,i)}catch(e){return pl(e instanceof Fd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Te?null:a}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&ch(i.target)){const t=new zl(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Lc.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Bh();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Ud(e,t,this.Ke,this.qe,n);return this.qe=Rh(),this.Qe=Gd(),this.Ke=new Qu(Pl),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new qd,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new $u(Pl),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||dl("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new qd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Gd(){return new Qu(zl.comparator)}function Hd(){return new Qu(zl.comparator)}const Wd={asc:"ASCENDING",desc:"DESCENDING"},Qd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yd={and:"AND",or:"OR"};class Jd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $d(e,t){return e.useProto3Json||fu(t)?t:{value:t}}function Xd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ef(e,t){return Xd(e,t.toTimestamp())}function tf(e){return yl(!!e),Ml.fromTimestamp(function(e){const t=ic(e);return new Ll(t.seconds,t.nanos)}(e))}function nf(e,t){return rf(e,t).canonicalString()}function rf(e,t){const n=function(e){return new Ul(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function sf(e){const t=Ul.fromString(e);return yl(Cf(t)),t}function af(e,t){return nf(e.databaseId,t.path)}function of(e,t){const n=sf(t);if(n.get(1)!==e.databaseId.projectId)throw new bl(wl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bl(wl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zl(hf(n))}function lf(e,t){return nf(e.databaseId,t)}function uf(e){const t=sf(e);return 4===t.length?Ul.emptyPath():hf(t)}function cf(e){return new Ul(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hf(e){return yl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function df(e,t,n){return{name:af(e,t),fields:n.value.mapValue.fields}}function ff(e,t,n){const r=of(e,t.name),i=tf(t.updateTime),s=t.createTime?tf(t.createTime):Ml.min(),a=new Rc({mapValue:{fields:t.fields}}),o=Lc.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function pf(e,t){let n;if(t instanceof gd)n={update:df(e,t.key,t.value)};else if(t instanceof Sd)n={delete:af(e,t.key)};else if(t instanceof yd)n={update:df(e,t.key,t.data),updateMask:Tf(t.fieldMask)};else{if(!(t instanceof Id))return gl();n={verify:af(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Xh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof td)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rd)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw gl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ef(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gl()}(e,t.precondition)),n}function mf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?ld.updateTime(tf(e.updateTime)):void 0!==e.exists?ld.exists(e.exists):ld.none()}(t.currentDocument):ld.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)yl("REQUEST_TIME"===t.setToServerValue),n=new Xh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Zh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new td(e)}else"increment"in t?n=new rd(e,t.increment):gl();const r=jl.fromServerFormat(t.fieldPath);return new ad(r,n)}(e,t))):[];if(t.update){t.update.name;const i=of(e,t.update.name),s=new Rc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ec(t.map((e=>jl.fromServerFormat(e))))}(t.updateMask);return new yd(i,s,e,n,r)}return new gd(i,s,n,r)}if(t.delete){const r=of(e,t.delete);return new Sd(r,n)}if(t.verify){const r=of(e,t.verify);return new Id(r,n)}return gl()}function gf(e,t){return{documents:[lf(e,t.path)]}}function yf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lf(e,i);const s=function(e){if(0!==e.length)return kf(qc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ef(e.field),direction:bf(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=$d(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function vf(e){let t=uf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){yl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=wf(e);return t instanceof qc&&Hc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Vc(_f(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,fu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Mc(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Mc(n,t)}(n.endAt)),mh(t,i,a,s,o,"F",l,u)}function wf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_f(e.unaryFilter.field);return Bc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=_f(e.unaryFilter.field);return Bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_f(e.unaryFilter.field);return Bc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=_f(e.unaryFilter.field);return Bc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gl()}}(e):void 0!==e.fieldFilter?function(e){return Bc.create(_f(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qc.create(e.compositeFilter.filters.map((e=>wf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gl()}}(e.compositeFilter.op))}(e):gl()}function bf(e){return Wd[e]}function Sf(e){return Qd[e]}function If(e){return Yd[e]}function Ef(e){return{fieldPath:e.canonicalString()}}function _f(e){return jl.fromServerFormat(e.fieldPath)}function kf(e){return e instanceof Bc?function(e){if("=="===e.op){if(kc(e.value))return{unaryFilter:{field:Ef(e.field),op:"IS_NAN"}};if(_c(e.value))return{unaryFilter:{field:Ef(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kc(e.value))return{unaryFilter:{field:Ef(e.field),op:"IS_NOT_NAN"}};if(_c(e.value))return{unaryFilter:{field:Ef(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ef(e.field),op:Sf(e.op),value:e.value}}}(e):e instanceof qc?function(e){const t=e.getFilters().map((e=>kf(e)));return 1===t.length?t[0]:{compositeFilter:{op:If(e.op),filters:t}}}(e):gl()}function Tf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Cf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class xf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ml.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ml.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new xf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Nf{constructor(e){this.ct=e}}function Df(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Af(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:af(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xd(e,t.version.toTimestamp()),createTime:Xd(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pf(t.version)};else{if(!t.isUnknownDocument())return gl();r.unknownDocument={path:n.path.toArray(),version:Pf(t.version)}}return r}function Af(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Pf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Rf(e){const t=new Ll(e.seconds,e.nanoseconds);return Ml.fromTimestamp(t)}function Of(e,t){const n=(t.baseMutations||[]).map((t=>mf(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>mf(e.ct,t))),i=Ll.fromMillis(t.localWriteTimeMs);return new Ed(t.batchId,i,n,r)}function Lf(e){const t=Rf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Rf(e.lastLimboFreeSnapshotVersion):Ml.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return yl(1===e.documents.length),bh(gh(uf(e.documents[0])))}(e.query):function(e){return bh(vf(e))}(e.query),new xf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,nc.fromBase64String(e.resumeToken))}function Mf(e,t){const n=Pf(t.snapshotVersion),r=Pf(t.lastLimboFreeSnapshotVersion);let i;i=ch(t.target)?gf(e.ct,t.target):yf(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ff(e){const t=vf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Eh(t,t.limit,"L"):t}function Uf(e,t){return new kd(t.largestBatchId,mf(e.ct,t.overlayMutation))}function Vf(e,t){const n=t.path.lastSegment();return[e,gu(t.path.popLast()),n]}function jf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Pf(r.readTime),documentKey:gu(r.documentKey.path),largestBatchId:r.largestBatchId}}class zf{getBundleMetadata(e,t){return Bf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Rf(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Bf(e).put(function(e){return{bundleId:e.id,createTime:Pf(tf(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return qf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Ff(e.bundledQuery),readTime:Rf(e.readTime)}}(e)}))}saveNamedQuery(e,t){return qf(e).put(function(e){return{name:e.name,readTime:Pf(tf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Bf(e){return Ku(e,"bundles")}function qf(e){return Ku(e,"namedQueries")}class Kf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Kf(e,n)}getOverlay(e,t){return Gf(e).get(Vf(this.userId,t)).next((e=>e?Uf(this.serializer,e):null))}getOverlays(e,t){const n=Fh();return eu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new kd(t,i);r.push(this.ht(e,s))})),eu.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(gu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Gf(e).H("collectionPathOverlayIndex",r))})),eu.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Fh(),i=gu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Gf(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Uf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Fh();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gf(e).Y({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=Uf(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Gf(e).put(function(e,t,n){const[r,i,s]=Vf(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:pf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Gf(e){return Ku(e,"documentOverlays")}class Hf{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(sc(e.integerValue));else if("doubleValue"in e){const n=sc(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),pu(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ac(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?xc(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):gl()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),zl.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Wf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Qf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Wf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Hf.bt=new Hf;class Yf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Qf(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=Qf(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Jf{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class $f{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Xf{constructor(){this.Gt=new Yf,this.zt=new Jf(this.Gt),this.jt=new $f(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Zf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Zf(this.indexId,this.documentKey,this.arrayValue,n)}}function ep(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=tp(e.arrayValue,t.arrayValue),0!==n?n:(n=tp(e.directionalValue,t.directionalValue),0!==n?n:zl.comparator(e.documentKey,t.documentKey)))}function tp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class np{constructor(e){this.Yt=new $u(((e,t)=>jl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(yl(e.collectionGroup===this.collectionId),this.en)return!1;const t=ql(e);if(void 0!==t&&!this.nn(t))return!1;const n=Kl(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new $u(jl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Gl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Gl(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Gl(n.field,"asc"===n.dir?0:1)));return new Bl(Bl.UNKNOWN_ID,this.collectionId,t,Hl.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rp(e){var t,n;if(yl(e instanceof Bc||e instanceof qc),e instanceof Bc){if(e instanceof rh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Bc.create(e.field,"==",t))))||[];return qc.create(r,"or")}return e}const r=e.filters.map((e=>rp(e)));return qc.create(r,e.op)}function ip(e){if(0===e.getFilters().length)return[];const t=lp(rp(e));return yl(op(t)),sp(t)||ap(t)?[t]:t.getFilters()}function sp(e){return e instanceof Bc}function ap(e){return e instanceof qc&&Hc(e)}function op(e){return sp(e)||ap(e)||function(e){if(e instanceof qc&&Gc(e)){for(const t of e.getFilters())if(!sp(t)&&!ap(t))return!1;return!0}return!1}(e)}function lp(e){if(yl(e instanceof Bc||e instanceof qc),e instanceof Bc)return e;if(1===e.filters.length)return lp(e.filters[0]);const t=e.filters.map((e=>lp(e)));let n=qc.create(t,e.op);return n=hp(n),op(n)?n:(yl(n instanceof qc),yl(Kc(n)),yl(n.filters.length>1),n.filters.reduce(((e,t)=>up(e,t))))}function up(e,t){let n;return yl(e instanceof Bc||e instanceof qc),yl(t instanceof Bc||t instanceof qc),n=e instanceof Bc?t instanceof Bc?function(e,t){return qc.create([e,t],"and")}(e,t):cp(e,t):t instanceof Bc?cp(t,e):function(e,t){if(yl(e.filters.length>0&&t.filters.length>0),Kc(e)&&Kc(t))return Jc(e,t.getFilters());const n=Gc(e)?e:t,r=Gc(e)?t:e,i=n.filters.map((e=>up(e,r)));return qc.create(i,"or")}(e,t),hp(n)}function cp(e,t){if(Kc(t))return Jc(t,e.getFilters());{const n=t.filters.map((t=>up(e,t)));return qc.create(n,"or")}}function hp(e){if(yl(e instanceof Bc||e instanceof qc),e instanceof Bc)return e;const t=e.getFilters();if(1===t.length)return hp(t[0]);if(Wc(e))return e;const n=t.map((e=>hp(e))),r=[];return n.forEach((t=>{t instanceof Bc?r.push(t):t instanceof qc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:qc.create(r,e.op)}class dp{constructor(){this._n=new fp}addToCollectionParentIndex(e,t){return this._n.add(t),eu.resolve()}getCollectionParents(e,t){return eu.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return eu.resolve()}deleteFieldIndex(e,t){return eu.resolve()}deleteAllFieldIndexes(e){return eu.resolve()}createTargetIndexes(e,t){return eu.resolve()}getDocumentsMatchingTarget(e,t){return eu.resolve(null)}getIndexType(e,t){return eu.resolve(0)}getFieldIndexes(e,t){return eu.resolve([])}getNextCollectionGroupToUpdate(e){return eu.resolve(null)}getMinOffset(e,t){return eu.resolve(Yl.min())}getMinOffsetFromCollectionGroup(e,t){return eu.resolve(Yl.min())}updateCollectionGroup(e,t,n){return eu.resolve()}updateIndexEntries(e,t){return eu.resolve()}}class fp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $u(Ul.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new $u(Ul.comparator)).toArray()}}const pp=new Uint8Array(0);class mp{constructor(e,t){this.databaseId=t,this.an=new fp,this.un=new Ah((e=>lh(e)),((e,t)=>uh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:gu(r)};return gp(e).put(i)}return eu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ol(t),""],!1,!0);return gp(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(wu(r.parent))}return n}))}addFieldIndex(e,t){const n=vp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=wp(e);return i.next((e=>{n.put(jf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=vp(e),r=wp(e),i=yp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=vp(e),n=yp(e),r=wp(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return eu.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new np(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=yp(e);let r=!0;const i=new Map;return eu.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Bh();const r=[];return eu.forEach(i,((i,s)=>{dl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(lh(t)));const a=function(e,t){const n=ql(t);if(void 0===n)return null;for(const r of hh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of Kl(t))for(const t of hh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Kl(t)){const t=0===i.kind?dh(e,i.fieldPath,e.startAt):fh(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Mc(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Kl(t)){const t=0===i.kind?fh(e,i.fieldPath,e.endAt):dh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Mc(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,o),f=this.In(i.indexId,a,c,l.inclusive,h,u.inclusive,d);return eu.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=zl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return eu.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ip(qc.create(e.filters,"and")).map((t=>oh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){const o=t?this.Tn(t[c/l]):pp,h=this.En(e,o,n[c%l],r),d=this.dn(e,o,i[c%l],s),f=a.map((t=>this.En(e,o,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new Zf(e,zl.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Zf(e,zl.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new np(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return eu.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new $u(jl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Xf;for(const r of Kl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Hf.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Xf;return Hf.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Xf;return Hf.bt.Pt(Sc(this.databaseId,t),n.Ht(function(e){const t=Kl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Xf);let i=0;for(const s of Kl(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Ec(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Hf.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Xf;n.seed(e.Wt()),Hf.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Bc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=vp(e),r=wp(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return eu.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Hl(t.sequenceNumber,new Yl(Rf(t.readTime),new zl(wu(t.documentKey)),t.largestBatchId)):Hl.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Gl(jl.fromServerFormat(t),n)}));return new Bl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Pl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=vp(e),i=wp(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>eu.forEach(t,(t=>i.put(jf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return eu.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?eu.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),eu.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?eu.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return yp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return yp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=yp(e);let i=new $u(ep);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Zf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new $u(ep);const r=this.An(t,e);if(null==r)return n;const i=ql(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ec(s))for(const i of s.arrayValue.values||[])n=n.add(new Zf(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Zf(t.indexId,e.key,pp,r));return n}wn(e,t,n,r,i){dl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=Zu(s),l=Zu(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=Zu(a)):t?(i(o),o=Zu(s)):(o=Zu(s),l=Zu(a))}}(r,i,ep,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),eu.waitFor(s)}gn(e){let t=1;return wp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>ep(e,t))).filter(((e,t,n)=>!t||0!==ep(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=ep(s,e),i=ep(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,pp,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,pp,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return ep(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bp)}getMinOffset(e,t){return eu.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||gl())))).next(bp)}}function gp(e){return Ku(e,"collectionParents")}function yp(e){return Ku(e,"indexEntries")}function vp(e){return Ku(e,"indexConfiguration")}function wp(e){return Ku(e,"indexState")}function bp(e){yl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Jl(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yl(t.readTime,t.documentKey,n)}const Sp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ip{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ip(e,Ip.DEFAULT_COLLECTION_PERCENTILE,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ep(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.Y({range:a},((e,t,n)=>(o++,n.delete())));s.push(l.next((()=>{yl(1===o)})));const u=[];for(const c of n.mutations){const e=Iu(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return eu.waitFor(s).next((()=>u))}function _p(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gl();t=e.noDocument}return JSON.stringify(t).length}Ip.DEFAULT_COLLECTION_PERCENTILE=10,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ip.DEFAULT=new Ip(41943040,Ip.DEFAULT_COLLECTION_PERCENTILE,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ip.DISABLED=new Ip(-1,0,0);class kp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){yl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new kp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cp(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=xp(e),s=Cp(e);return s.add({}).next((a=>{yl("number"==typeof a);const o=new Ed(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>pf(e.ct,t))),i=n.mutations.map((t=>pf(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),u=[];let c=new $u(((e,t)=>Pl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Iu(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Eu))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[a]=o.keys()})),eu.waitFor(u).next((()=>o))}))}lookupMutationBatch(e,t){return Cp(e).get(t).next((e=>e?(yl(e.userId===this.userId),Of(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?eu.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Cp(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(yl(t.batchId>=n),i=Of(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Cp(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cp(e).W("userMutationsIndex",t).next((e=>e.map((e=>Of(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Su(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return xp(e).Y({range:r},((n,r,s)=>{const[a,o,l]=n,u=wu(o);if(a===this.userId&&t.path.isEqual(u))return Cp(e).get(l).next((e=>{if(!e)throw gl();yl(e.userId===this.userId),i.push(Of(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $u(Pl);const r=[];return t.forEach((t=>{const i=Su(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=xp(e).Y({range:s},((e,r,i)=>{const[s,a,o]=e,l=wu(a);s===this.userId&&t.path.isEqual(l)?n=n.add(o):i.done()}));r.push(a)})),eu.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Su(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new $u(Pl);return xp(e).Y({range:s},((e,t,i)=>{const[s,o,l]=e,u=wu(o);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(a=a.add(l)):i.done()})).next((()=>this.Fn(e,a)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Cp(e).get(t).next((e=>{if(null===e)throw gl();yl(e.userId===this.userId),n.push(Of(this.serializer,e))})))})),eu.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Ep(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),eu.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return eu.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return xp(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=wu(e[1]);r.push(t)}else n.done()})).next((()=>{yl(0===r.length)}))}))}containsKey(e,t){return Tp(e,this.userId,t)}xn(e){return Np(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Tp(e,t,n){const r=Su(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return xp(e).Y({range:s,J:!0},((e,n,r)=>{const[s,o,l]=e;s===t&&o===i&&(a=!0),r.done()})).next((()=>a))}function Cp(e){return Ku(e,"mutations")}function xp(e){return Ku(e,"documentMutations")}function Np(e){return Ku(e,"mutationQueues")}class Dp{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Dp(0)}static Bn(){return new Dp(-1)}}class Ap{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Dp(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Ml.fromTimestamp(new Ll(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Pp(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(yl(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Pp(e).Y(((s,a)=>{const o=Lf(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))})).next((()=>eu.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Pp(e).Y(((e,n)=>{const r=Lf(n);t(r)}))}Ln(e){return Rp(e).get("targetGlobalKey").next((e=>(yl(null!==e),e)))}kn(e,t){return Rp(e).put("targetGlobalKey",t)}qn(e,t){return Pp(e).put(Mf(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=lh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Pp(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Lf(n);uh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Op(e);return t.forEach((t=>{const s=gu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),eu.waitFor(r)}removeMatchingKeys(e,t,n){const r=Op(e);return eu.forEach(t,(t=>{const i=gu(t.path);return eu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Op(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Op(e);let i=Bh();return r.Y({range:n,J:!0},((e,t,n)=>{const r=wu(e[1]),s=new zl(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=gu(t.path),r=IDBKeyRange.bound([n],[Ol(n)],!1,!0);let i=0;return Op(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Pp(e).get(t).next((e=>e?Lf(e):null))}}function Pp(e){return Ku(e,"targets")}function Rp(e){return Ku(e,"targetGlobal")}function Op(e){return Ku(e,"targetDocuments")}function Lp(e,t){let[n,r]=e,[i,s]=t;const a=Pl(n,i);return 0===a?Pl(r,s):a}class Mp{constructor(e){this.Kn=e,this.buffer=new $u(Lp),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Lp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){dl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){su(e)?dl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Zl(e)}await this.zn(3e5)}))}}class Up{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return eu.resolve(du._e);const n=new Mp(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dl("LruGarbageCollector","Garbage collection skipped; disabled"),eu.resolve(Sp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(dl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Sp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,a,o,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(dl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),hl()<=ht.DEBUG&&dl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),eu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Vp(e,t){return new Up(e,t)}class jp{constructor(e,t){this.db=e,this.garbageCollector=Vp(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return zp(e,n)}removeReference(e,t,n){return zp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return zp(e,t)}er(e,t){return function(e,t){let n=!1;return Np(e).Z((r=>Tp(e,r,t).next((e=>(e&&(n=!0),eu.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,a)=>{if(a<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Ml.min()),Op(e).delete(function(e){return[0,gu(e.path)]}(s)))))}));r.push(t)}})).next((()=>eu.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return zp(e,t)}Xn(e,t){const n=Op(e);let r,i=du._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,a]=e,{path:o,sequenceNumber:l}=n;0===s?(i!==du._e&&t(new zl(wu(r)),i),i=l,r=o):i=du._e})).next((()=>{i!==du._e&&t(new zl(wu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zp(e,t){return Op(e).put(function(e,t){return{targetId:0,path:gu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Bp{constructor(){this.changes=new Ah((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?eu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Wp(e).put(n)}removeEntry(e,t,n){return Wp(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Af(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Lc.newInvalidDocument(t);return Wp(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Lc.newInvalidDocument(t)};return Wp(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},((e,r)=>{n={document:this.nr(t,r),size:_p(r)}})).next((()=>n))}getEntries(e,t){let n=Rh();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Rh(),r=new Qu(zl.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,_p(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return eu.resolve();let r=new $u(Jp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Qp(r.first()),Qp(r.last())),s=r.getIterator();let a=s.getNext();return Wp(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=zl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Jp(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.U(Qp(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Af(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).W(IDBKeyRange.bound(a,o,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Rh();for(const i of e){const e=this.nr(zl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ch(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Rh();const s=Yp(t,n),a=Yp(t,Yl.max());return Wp(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},((e,t,n)=>{const s=this.nr(zl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Gp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Hp(e).get("remoteDocumentGlobalKey").next((e=>(yl(!!e),e)))}tr(e,t){return Hp(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=ff(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=zl.fromSegments(t.noDocument.path),r=Rf(t.noDocument.readTime);n=Lc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gl();{const e=zl.fromSegments(t.unknownDocument.path),r=Rf(t.unknownDocument.version);n=Lc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ll(e[0],e[1]);return Ml.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Ml.min()))return e}return Lc.newInvalidDocument(e)}}function Kp(e){return new qp(e)}class Gp extends Bp{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ah((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new $u(((e,t)=>Pl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const a=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=Df(this.ar.serializer,s);r=r.add(i.path.popLast());const l=_p(o);n+=l-a.size,t.push(this.ar.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=Df(this.ar.serializer,s.convertToNoDocument(Ml.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),eu.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Hp(e){return Ku(e,"remoteDocumentGlobal")}function Wp(e){return Ku(e,"remoteDocumentsV14")}function Qp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Yp(e,t){const n=t.documentKey.path.toArray();return[e,Af(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Pl(n[s],r[s]),i)return i;return i=Pl(n.length,r.length),i||(i=Pl(n[n.length-2],r[r.length-2]),i||Pl(n[n.length-1],r[r.length-1]))}class $p{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&fd(n.mutation,e,ec.empty(),Ll.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Bh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bh();const r=Fh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Lh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Fh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Bh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Rh();const s=Vh(),a=Vh();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof yd)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),fd(a.mutation,t,a.mutation.getFieldMask(),Ll.now())):s.set(t.key,ec.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new $p(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Vh();let r=new Qu(((e,t)=>e-t)),i=Bh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||ec.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Bh()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=Uh();l.forEach((e=>{if(!i.has(e)){const r=hd(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return eu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):eu.resolve(Fh());let a=-1,o=i;return s.next((t=>eu.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?eu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Bh()))).next((e=>({batchId:a,changes:Mh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zl(t)).next((e=>{let t=Lh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Lh();return this.indexManager.getCollectionParents(e,i).next((a=>eu.forEach(a,(a=>{const o=function(e,t){return new ph(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Lc.newInvalidDocument(r)))}));let n=Lh();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&fd(s.mutation,r,ec.empty(),Ll.now()),Ch(t,r)&&(n=n.insert(e,r))})),n}))}}class Zp{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return eu.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:tf(e.createTime)}}(t)),eu.resolve()}getNamedQuery(e,t){return eu.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Ff(e.bundledQuery),readTime:tf(e.readTime)}}(t)),eu.resolve()}}class em{constructor(){this.overlays=new Qu(zl.comparator),this.hr=new Map}getOverlay(e,t){return eu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fh();return eu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),eu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),eu.resolve()}getOverlaysForCollection(e,t,n){const r=Fh(),i=t.length+1,s=new zl(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return eu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Fh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Fh(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return eu.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kd(t,n));let i=this.hr.get(t);void 0===i&&(i=Bh(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class tm{constructor(){this.Pr=new $u(nm.Ir),this.Tr=new $u(nm.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new nm(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new nm(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new zl(new Ul([])),n=new nm(t,e),r=new nm(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new zl(new Ul([])),n=new nm(t,e),r=new nm(t,e+1);let i=Bh();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new nm(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class nm{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return zl.comparator(e.key,t.key)||Pl(e.pr,t.pr)}static Er(e,t){return Pl(e.pr,t.pr)||zl.comparator(e.key,t.key)}}class rm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new $u(nm.Ir)}checkEmpty(e){return eu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ed(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.wr=this.wr.add(new nm(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return eu.resolve(s)}lookupMutationBatch(e,t){return eu.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return eu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return eu.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return eu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nm(t,0),r=new nm(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),eu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $u(Pl);return t.forEach((e=>{const t=new nm(e,0),r=new nm(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),eu.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;zl.isDocumentKey(i)||(i=i.child(""));const s=new nm(new zl(i),0);let a=new $u(Pl);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.pr)),!0)}),s),eu.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){yl(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return eu.forEach(t.mutations,(r=>{const i=new nm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new nm(t,0),r=this.wr.firstAfterOrEqual(n);return eu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,eu.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class im{constructor(e){this.vr=e,this.docs=new Qu(zl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return eu.resolve(n?n.document.mutableCopy():Lc.newInvalidDocument(t))}getEntries(e,t){let n=Rh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Lc.newInvalidDocument(e))})),eu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Rh();const s=t.path,a=new zl(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Jl(Ql(a),n)<=0||(r.has(a.key)||Ch(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return eu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){gl()}Fr(e,t){return eu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new sm(this)}getSize(e){return eu.resolve(this.size)}}class sm extends Bp{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),eu.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class am{constructor(e){this.persistence=e,this.Mr=new Ah((e=>lh(e)),uh),this.lastRemoteSnapshotVersion=Ml.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tm,this.targetCount=0,this.Br=Dp.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),eu.resolve()}getLastRemoteSnapshotVersion(e){return eu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return eu.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),eu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),eu.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Dp(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,eu.resolve()}updateTargetData(e,t){return this.qn(t),eu.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,eu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),eu.waitFor(i).next((()=>r))}getTargetCount(e){return eu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return eu.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),eu.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),eu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),eu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return eu.resolve(n)}containsKey(e,t){return eu.resolve(this.Nr.containsKey(t))}}class om{constructor(e,t){this.Lr={},this.overlays={},this.kr=new du(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new am(this),this.indexManager=new dp,this.remoteDocumentCache=function(e){return new im(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Nf(t),this.$r=new Zp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new em,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new rm(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){dl("MemoryPersistence","Starting transaction:",e);const r=new lm(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return eu.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class lm extends Xl{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.zr=new tm,this.jr=null}static Hr(e){return new um(e)}get Jr(){if(this.jr)return this.jr;throw gl()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),eu.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),eu.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),eu.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eu.forEach(this.Jr,(n=>{const r=zl.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Ml.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return eu.or([()=>eu.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class cm{constructor(e){this.serializer=e}N(e,t,n,r){const i=new tu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bu,{unique:!0}),e.createObjectStore("documentMutations")}(e),hm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=eu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ml.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return eu.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Lu});t.createIndex("collectionPathOverlayIndex",Mu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Fu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:_u});t.createIndex("documentKeyIndex",ku),t.createIndex("collectionGroupIndex",Tu)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Au}).createIndex("sequenceNumberIndex",Pu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ru}).createIndex("documentKeyIndex",Ou,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=_p(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>eu.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>eu.forEach(n,(n=>{yl(n.userId===t.userId);const r=Of(this.serializer,n);return Ep(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Ul(n),a=function(e){return[0,gu(e)]}(s);r.push(t.get(a).next((n=>n?eu.resolve():(n=>t.put({targetId:0,path:gu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>eu.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Du});const n=t.store("collectionParents"),r=new fp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:gu(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Ul(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const a=wu(r);return i(a.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Lf(n),i=Mf(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new zl(Ul.fromString(e.document.name).popFirst(5)):e.noDocument?zl.fromSegments(e.noDocument.path):e.unknownDocument?zl.fromSegments(e.unknownDocument.path):gl()}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>eu.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Kp(this.serializer),i=new om(um.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Bh();Of(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),eu.forEach(n,((e,n)=>{const s=new ll(n),a=Kf.lt(this.serializer,s),o=i.getIndexManager(s),l=kp.lt(s,this.serializer,o,i.referenceDelegate);return new Xp(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new qu(t,du._e),e).next()}))}))}}function hm(e){e.createObjectStore("targetDocuments",{keyPath:xu}).createIndex("documentTargetsIndex",Nu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cu,{unique:!0}),e.createObjectStore("targetGlobal")}const dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fm{constructor(e,t,n,r,i,s,a,o,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=a,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!fm.D())throw new bl(wl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jp(this,r),this.Ti=t+"main",this.serializer=new Nf(o),this.Ei=new nu(this.Ti,this.ui,new cm(this.serializer)),this.Qr=new Ap(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kp(this.serializer),this.$r=new zf,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&fl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bl(wl.FAILED_PRECONDITION,dm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new du(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(su(e))return dl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return pm(e).get("owner").next((e=>eu.resolve(this.Si(e))))}bi(e){return mm(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ku(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return eu.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?eu.resolve(!0):pm(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new bl(wl.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||mm(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&dl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new qu(e,du._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>mm(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return kp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mp(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Kf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){dl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Bu:14===e?zu:13===e?ju:12===e?Vu:11===e?Uu:void gl()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new qu(r,this.kr?this.kr.next():du._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw fl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new bl(wl.FAILED_PRECONDITION,$l);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return pm(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new bl(wl.FAILED_PRECONDITION,dm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pm(e).put("owner",t)}static D(){return nu.D()}yi(e){const t=pm(e);return t.get("owner").next((e=>this.Si(e)?(dl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):eu.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(fl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ze()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return dl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return fl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(bI){fl("Failed to set zombie client id.",bI)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(bI){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function pm(e){return Ku(e,"owner")}function mm(e){return Ku(e,"clientMetadata")}function gm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ym{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Bh(),r=Bh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ym(e,t.fromCache,n,r)}}class vm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ze()?8:nu.v(Ve())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new vm;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(hl()<=ht.DEBUG&&dl("QueryEngine","SDK will not create cache indexes for query:",Th(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),eu.resolve()):(hl()<=ht.DEBUG&&dl("QueryEngine","Query:",Th(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(hl()<=ht.DEBUG&&dl("QueryEngine","The SDK decides to create cache indexes for query:",Th(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bh(t))):eu.resolve())}ji(e,t){if(yh(t))return eu.resolve(null);let n=bh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Eh(t,null,"F"),n=bh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Bh(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Eh(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return yh(t)||r.isEqual(Ml.min())?eu.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?eu.resolve(null):(hl()<=ht.DEBUG&&dl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Th(t)),this.es(e,s,t,Wl(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new $u(Nh(e));return t.forEach(((t,r)=>{Ch(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return hl()<=ht.DEBUG&&dl("QueryEngine","Using full collection scan to execute query:",Th(t)),this.zi.getDocumentsMatchingQuery(e,t,Yl.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class bm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Qu(Pl),this.rs=new Ah((e=>lh(e)),uh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Sm(e,t,n,r){return new bm(e,t,n,r)}async function Im(e,t){const n=vl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Bh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Em(e){const t=vl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function _m(e,t,n){let r=Bh(),i=Bh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Rh();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ml.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):dl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function km(e,t){const n=vl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Tm(e,t){const n=vl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,eu.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new xf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Cm(e,t,n){const r=vl(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!su(e))throw e;dl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function xm(e,t,n){const r=vl(e);let i=Ml.min(),s=Bh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=vl(e),i=r.rs.get(n);return void 0!==i?eu.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,bh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Ml.min(),n?s:Bh()))).next((e=>(Nm(r,xh(t),e),{documents:e,hs:s})))))}function Nm(e,t,n){let r=e.ss.get(t)||Ml.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}class Dm{constructor(){this.activeTargetIds=Kh()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Am{constructor(){this.no=new Dm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Dm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Pm{io(e){}shutdown(){}}class Rm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){dl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){dl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Om=null;function Lm(){return null===Om?Om=268435456+Math.round(2147483648*Math.random()):Om++,"0x"+Om.toString(16)}const Mm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fm{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Um="WebChannelConnection";class Vm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Lm(),a=this.bo(e,t.toUriEncodedString());dl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(o,r,i),this.Co(e,a,o,n).then((t=>(dl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw pl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Mm[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Lm();return new Promise(((s,a)=>{const o=new il;o.setWithCredentials(!0),o.listenOnce(el.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Zo.NO_ERROR:const t=o.getResponseJson();dl(Um,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Zo.TIMEOUT:dl(Um,"RPC '".concat(e,"' ").concat(i," timed out")),a(new bl(wl.DEADLINE_EXCEEDED,"Request time out"));break;case Zo.HTTP_ERROR:const n=o.getStatus();if(dl(Um,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wl).indexOf(t)>=0?t:wl.UNKNOWN}(t.status);a(new bl(e,t.message))}else a(new bl(wl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bl(wl.UNAVAILABLE,"Connection failed."));break;default:gl()}}finally{dl(Um,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);dl(Um,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Lm(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$o(),a=Xo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Do(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");dl(Um,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),o);const c=s.createWebChannel(u,o);let h=!1,d=!1;const f=new Fm({lo:t=>{d?dl(Um,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(dl(Um,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),dl(Um,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,rl.EventType.OPEN,(()=>{d||dl(Um,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,rl.EventType.CLOSE,(()=>{d||(d=!0,dl(Um,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,rl.EventType.ERROR,(t=>{d||(d=!0,pl(Um,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new bl(wl.UNAVAILABLE,"The operation could not be completed")))})),p(c,rl.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];yl(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){dl(Um,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Cd[e];if(void 0!==t)return Dd(t)}(t),i=a.message;void 0===n&&(n=wl.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.Vo(new bl(n,i)),c.close()}else dl(Um,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(a,tl.STAT_EVENT,(t=>{t.stat===nl.PROXY?dl(Um,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nl.NOPROXY&&dl(Um,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function jm(){return"undefined"!=typeof window?window:null}function zm(){return"undefined"!=typeof document?document:null}function Bm(e){return new Jd(e,!0)}class qm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&dl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Km{constructor(e,t,n,r,i,s,a,o){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new qm(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===wl.RESOURCE_EXHAUSTED?(fl(t.toString()),fl("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===wl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new bl(wl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return dl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(dl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gm extends Km{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(yl(void 0===t||"string"==typeof t),nc.fromBase64String(t||"")):(yl(void 0===t||t instanceof Uint8Array),nc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?wl.UNKNOWN:Dd(e.code);return new bl(t,e.message||"")}(a);n=new Bd(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=of(e,r.document.name),s=tf(r.document.updateTime),a=r.document.createTime?tf(r.document.createTime):Ml.min(),o=new Rc({mapValue:{fields:r.document.fields}}),l=Lc.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new jd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=of(e,r.document),s=r.readTime?tf(r.readTime):Ml.min(),a=Lc.newNoDocument(i,s),o=r.removedTargetIds||[];n=new jd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=of(e,r.document),s=r.removedTargetIds||[];n=new jd([],s,i,null)}else{if(!("filter"in t))return gl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Td(r,i),a=e.targetId;n=new zd(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ml.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ml.min():t.readTime?tf(t.readTime):Ml.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=cf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ch(r)?{documents:gf(e,r)}:{query:yf(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Zd(e,t.resumeToken);const r=$d(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ml.min())>0){n.readTime=Xd(e,t.snapshotVersion.toTimestamp());const r=$d(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=cf(this.serializer),t.removeTarget=e,this.t_(t)}}class Hm extends Km{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(yl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(yl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?tf(e.updateTime):tf(t);return n.isEqual(Ml.min())&&(n=tf(t)),new od(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=tf(e.commitTime);return this.listener.T_(n,t)}return yl(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=cf(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>pf(this.serializer,e)))};this.t_(t)}}class Wm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new bl(wl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.So(e,rf(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bl(wl.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.vo(e,rf(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===wl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bl(wl.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Qm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(fl(t),this.g_=!1):dl("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Ym{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{ig(this)&&(dl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=vl(e);t.v_.add(4),await $m(t),t.x_.set("Unknown"),t.v_.delete(4),await Jm(t)}(this))}))})),this.x_=new Qm(n,r)}}async function Jm(e){if(ig(e))for(const t of e.F_)await t(!0)}async function $m(e){for(const t of e.F_)await t(!1)}function Xm(e,t){const n=vl(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),rg(n)?ng(n):Ig(n).Jo()&&eg(n,t))}function Zm(e,t){const n=vl(e),r=Ig(n);n.C_.delete(t),r.Jo()&&tg(n,t),0===n.C_.size&&(r.Jo()?r.Xo():ig(n)&&n.x_.set("Unknown"))}function eg(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ml.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ig(e).c_(t)}function tg(e,t){e.O_.Oe(t),Ig(e).l_(t)}function ng(e){e.O_=new Kd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ig(e).start(),e.x_.p_()}function rg(e){return ig(e)&&!Ig(e).Ho()&&e.C_.size>0}function ig(e){return 0===vl(e).v_.size}function sg(e){e.O_=void 0}async function ag(e){e.C_.forEach(((t,n)=>{eg(e,t)}))}async function og(e,t){sg(e),rg(e)?(e.x_.S_(t),ng(e)):e.x_.set("Unknown")}async function lg(e,t,n){if(e.x_.set("Online"),t instanceof Bd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){dl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ug(e,n)}else if(t instanceof jd?e.O_.$e(t):t instanceof zd?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Ml.min()))try{const t=await Em(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(nc.EMPTY_BYTE_STRING,r.snapshotVersion)),tg(e,t);const i=new xf(r.target,t,n,r.sequenceNumber);eg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){dl("RemoteStore","Failed to raise snapshot:",t),await ug(e,t)}}async function ug(e,t,n){if(!su(t))throw t;e.v_.add(1),await $m(e),e.x_.set("Offline"),n||(n=()=>Em(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{dl("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Jm(e)}))}function cg(e,t){return t().catch((n=>ug(e,n,t)))}async function hg(e){const t=vl(e),n=Eg(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;dg(t);)try{const e=await km(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,fg(t,e)}catch(e){await ug(t,e)}pg(t)&&mg(t)}function dg(e){return ig(e)&&e.D_.length<10}function fg(e,t){e.D_.push(t);const n=Eg(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function pg(e){return ig(e)&&!Eg(e).Ho()&&e.D_.length>0}function mg(e){Eg(e).start()}async function gg(e){Eg(e).d_()}async function yg(e){const t=Eg(e);for(const n of e.D_)t.I_(n.mutations)}async function vg(e,t,n){const r=e.D_.shift(),i=_d.from(r,t,n);await cg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await hg(e)}async function wg(e,t){t&&Eg(e).P_&&await async function(e,t){if(function(e){return Nd(e)&&e!==wl.ABORTED}(t.code)){const n=e.D_.shift();Eg(e).Zo(),await cg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hg(e)}}(e,t),pg(e)&&mg(e)}async function bg(e,t){const n=vl(e);n.asyncQueue.verifyOperationInProgress(),dl("RemoteStore","RemoteStore received new credentials");const r=ig(n);n.v_.add(3),await $m(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Jm(n)}async function Sg(e,t){const n=vl(e);t?(n.v_.delete(2),await Jm(n)):t||(n.v_.add(2),await $m(n),n.x_.set("Unknown"))}function Ig(e){return e.N_||(e.N_=function(e,t,n){const r=vl(e);return r.R_(),new Gm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:ag.bind(null,e),To:og.bind(null,e),u_:lg.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),rg(e)?ng(e):e.x_.set("Unknown")):(await e.N_.stop(),sg(e))}))),e.N_}function Eg(e){return e.B_||(e.B_=function(e,t,n){const r=vl(e);return r.R_(),new Hm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:gg.bind(null,e),To:wg.bind(null,e),E_:yg.bind(null,e),T_:vg.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await hg(e)):(await e.B_.stop(),e.D_.length>0&&(dl("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class _g{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Sl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new _g(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bl(wl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(e,t){if(fl("AsyncQueue","".concat(t,": ").concat(e)),su(e))return new bl(wl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Tg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zl.comparator(t.key,n.key):(e,t)=>zl.comparator(e.key,t.key),this.keyedMap=Lh(),this.sortedSet=new Qu(this.comparator)}static emptySet(e){return new Tg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Cg{constructor(){this.L_=new Qu(zl.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):gl():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class xg{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new xg(e,t,Tg.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ng{constructor(){this.q_=void 0,this.Q_=[]}}class Dg{constructor(){this.queries=new Ah((e=>kh(e)),_h),this.onlineState="Unknown",this.K_=new Set}}async function Ag(e,t){const n=vl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ng),i)try{s.q_=await n.onListen(r)}catch(e){const n=kg(e,"Initialization of query '".concat(Th(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Lg(n)}async function Pg(e,t){const n=vl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Rg(e,t){const n=vl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Lg(n)}function Og(e,t,n){const r=vl(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Lg(e){e.K_.forEach((e=>{e.next()}))}class Mg{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=xg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Fg{constructor(e){this.key=e}}class Ug{constructor(e){this.key=e}}class Vg{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Bh(),this.mutatedKeys=Bh(),this.ua=Nh(e),this.ca=new Tg(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Cg,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Ch(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.ua(c,o)>0||l&&this.ua(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:a,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gl()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const a=t&&!r?this.Ea():[],o=0===this.aa.size&&this.current&&!r?1:0,l=o!==this._a;return this._a=o,0!==s.length||l?{snapshot:new xg(this.query,e.ca,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Cg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Bh(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Ug(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Fg(n))})),t}Ra(e){this.oa=e.hs,this.aa=Bh();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return xg.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class jg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zg{constructor(e){this.key=e,this.ma=!1}}class Bg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ah((e=>kh(e)),_h),this.pa=new Map,this.ya=new Set,this.wa=new Qu(zl.comparator),this.Sa=new Map,this.ba=new tm,this.Da={},this.Ca=new Map,this.va=Dp.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function qg(e,t){const n=oy(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Tm(n.localStore,bh(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Kg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Xm(n.remoteStore,e)}return i}async function Kg(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await xm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ty(e,t.targetId,o.da),o.snapshot}(e,t,n,r);const s=await xm(e.localStore,t,!0),a=new Vg(t,s.hs),o=a.ha(s.documents),l=Vd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);ty(e,n,u.da);const c=new jg(t,n,a);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function Gg(e,t){const n=vl(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!_h(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Cm(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Zm(n.remoteStore,r.targetId),Zg(n,r.targetId)})).catch(Zl)):(Zg(n,r.targetId),await Cm(n.localStore,r.targetId,!0))}async function Hg(e,t){const n=vl(e);try{const e=await function(e,t){const n=vl(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,o))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(nc.EMPTY_BYTE_STRING,Ml.min()).withLastLimboFreeSnapshotVersion(Ml.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&a.push(n.Qr.updateTargetData(e,u))}));let o=Rh(),l=Bh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(_m(e,s,t.documentUpdates).next((e=>{o=e.cs,l=e.ls}))),!r.isEqual(Ml.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return eu.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(yl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?yl(r.ma):e.removedDocuments.size>0&&(yl(r.ma),r.ma=!1))})),await iy(n,e,t)}catch(e){await Zl(e)}}function Wg(e,t,n){const r=vl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=vl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Lg(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Qg(e,t,n){const r=vl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new Qu(zl.comparator);e=e.insert(s,Lc.newNoDocument(s,Ml.min()));const n=Bh().add(s),i=new Ud(Ml.min(),new Map,new Qu(Pl),e,n);await Hg(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),ry(r)}else await Cm(r.localStore,t,!1).then((()=>Zg(r,t,n))).catch(Zl)}async function Yg(e,t){const n=vl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=vl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=eu.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);yl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Xg(n,r,null),$g(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await iy(n,e)}catch(e){await Zl(e)}}async function Jg(e,t,n){const r=vl(e);try{const e=await function(e,t){const n=vl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(yl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Xg(r,t,n),$g(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await iy(r,e)}catch(n){await Zl(n)}}function $g(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Xg(e,t,n){const r=vl(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Zg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||ey(e,t)}))}function ey(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Zm(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),ry(e))}function ty(e,t,n){for(const r of n)r instanceof Fg?(e.ba.addReference(r.key,t),ny(e,r)):r instanceof Ug?(dl("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||ey(e,r.key)):gl()}function ny(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(dl("SyncEngine","New document in limbo: "+n),e.ya.add(r),ry(e))}function ry(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new zl(Ul.fromString(t)),r=e.va.next();e.Sa.set(r,new zg(n)),e.wa=e.wa.insert(n,r),Xm(e.remoteStore,new xf(bh(gh(n.path)),r,"TargetPurposeLimboResolution",du._e))}}async function iy(e,t,n){const r=vl(e),i=[],s=[],a=[];r.ga.isEmpty()||(r.ga.forEach(((e,o)=>{a.push(r.Ma(o,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=ym.Ki(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.fa.u_(i),await async function(e,t){const n=vl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>eu.forEach(t,(t=>eu.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>eu.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!su(e))throw e;dl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function sy(e,t){const n=vl(e);if(!n.currentUser.isEqual(t)){dl("SyncEngine","User change. New user:",t.toKey());const e=await Im(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new bl(wl.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await iy(n,e.us)}}function ay(e,t){const n=vl(e),r=n.Sa.get(t);if(r&&r.ma)return Bh().add(r.key);{let e=Bh();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}function oy(e){const t=vl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ay.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qg.bind(null,t),t.fa.u_=Rg.bind(null,t.eventManager),t.fa.xa=Og.bind(null,t.eventManager),t}function ly(e){const t=vl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jg.bind(null,t),t}class uy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Sm(this.persistence,new wm,e.initialUser,this.serializer)}createPersistence(e){return new om(um.Hr,this.serializer)}createSharedClientState(e){return new Am}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cy extends uy{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await ly(this.Na.syncEngine),await hg(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Sm(this.persistence,new wm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Fp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new hu(t,this.persistence);return new cu(e.asyncQueue,n)}createPersistence(e){const t=gm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ip.withCacheSize(this.cacheSizeBytes):Ip.DEFAULT;return new fm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,jm(),zm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Am}}class hy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Wg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sy.bind(null,this.syncEngine),await Sg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dg}createDatastore(e){const t=Bm(e.databaseInfo.databaseId),n=function(e){return new Vm(e)}(e.databaseInfo);return function(e,t,n,r){return new Wm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ym(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Wg(this.syncEngine,e,0)),Rm.D()?new Rm:new Pm)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Bg(e,t,n,r,i,s);return a&&(o.Fa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=vl(e);dl("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await $m(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):fl("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class fy{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ll.UNAUTHENTICATED,this.clientId=Al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{dl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(dl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bl(wl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=kg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function py(e,t){e.asyncQueue.verifyOperationInProgress(),dl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Im(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function my(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yy(e);dl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>bg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bg(t.remoteStore,n))),e._onlineComponents=t}function gy(e){return"FirebaseError"===e.name?e.code===wl.FAILED_PRECONDITION||e.code===wl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function yy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){dl("FirestoreClient","Using user provided OfflineComponentProvider");try{await py(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!gy(n))throw n;pl("Error using user provided cache. Falling back to memory cache: "+n),await py(e,new uy)}}else dl("FirestoreClient","Using default OfflineComponentProvider"),await py(e,new uy);return e._offlineComponents}async function vy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(dl("FirestoreClient","Using user provided OnlineComponentProvider"),await my(e,e._uninitializedComponentsProvider._online)):(dl("FirestoreClient","Using default OnlineComponentProvider"),await my(e,new hy))),e._onlineComponents}function wy(e){return vy(e).then((e=>e.syncEngine))}async function by(e){const t=await vy(e),n=t.eventManager;return n.onListen=qg.bind(null,t.syncEngine),n.onUnlisten=Gg.bind(null,t.syncEngine),n}function Sy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new dy({next:s=>{t.enqueueAndForget((()=>Pg(e,a)));const o=s.docs.has(n);!o&&s.fromCache?i.reject(new bl(wl.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&r&&"server"===r.source?i.reject(new bl(wl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Mg(gh(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Ag(e,a)}(await by(e),e.asyncQueue,t,n,r))),r.promise}function Iy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new dy({next:n=>{t.enqueueAndForget((()=>Pg(e,a))),n.fromCache&&"server"===r.source?i.reject(new bl(wl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Mg(n,s,{includeMetadataChanges:!0,Z_:!0});return Ag(e,a)}(await by(e),e.asyncQueue,t,n,r))),r.promise}function Ey(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _y=new Map;function ky(e,t,n){if(!n)throw new bl(wl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ty(e){if(!zl.isDocumentKey(e))throw new bl(wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cy(e){if(zl.isDocumentKey(e))throw new bl(wl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":gl()}function Ny(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bl(wl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xy(e);throw new bl(wl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Dy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bl(wl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bl(wl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new bl(wl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ey(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bl(wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new bl(wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new bl(wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bl(wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bl(wl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new El;switch(e.type){case"firstParty":return new Cl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bl(wl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_y.get(e);t&&(dl("ComponentProvider","Removing Datastore"),_y.delete(e),t.terminate())}(this),Promise.resolve()}}function Py(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Ny(e,Ay))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ll.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new bl(wl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ll(s)}e._authCredentials=new _l(new Il(t,n))}}class Ry{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ry(this.firestore,e,this._query)}}class Oy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ly(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oy(this.firestore,e,this._key)}}class Ly extends Ry{constructor(e,t,n){super(e,t,gh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oy(this.firestore,null,new zl(e))}withConverter(e){return new Ly(this.firestore,e,this._path)}}function My(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=st(e),ky("collection","path",t),e instanceof Ay){const n=Ul.fromString(t,...r);return Cy(n),new Ly(e,null,n)}{if(!(e instanceof Oy||e instanceof Ly))throw new bl(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ul.fromString(t,...r));return Cy(n),new Ly(e.firestore,null,n)}}function Fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=st(e),1===arguments.length&&(t=Al.newId()),ky("doc","path",t),e instanceof Ay){const n=Ul.fromString(t,...r);return Ty(n),new Oy(e,null,new zl(n))}{if(!(e instanceof Oy||e instanceof Ly))throw new bl(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ul.fromString(t,...r));return Ty(n),new Oy(e.firestore,e instanceof Ly?e.converter:null,new zl(n))}}class Uy{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new qm(this,"async_queue_retry"),this._u=()=>{const e=zm();e&&dl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=zm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=zm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Sl;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(bI){if(!su(bI))throw bI;dl("AsyncQueue","Operation failed with retryable error: "+bI)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=_g.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&gl()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class Vy extends Ay{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Uy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zy(this),this._firestoreClient.terminate()}}function jy(e){return e._firestoreClient||zy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new cc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ey(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new fy(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function By(e,t,n){const r=new Sl;return e.asyncQueue.enqueue((async()=>{try{await py(e,n),await my(e,t),r.resolve()}catch(e){const n=e;if(!gy(n))throw n;pl("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function qy(e){if(e._initialized||e._terminated)throw new bl(wl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ky{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ky(nc.fromBase64String(e))}catch(e){throw new bl(wl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ky(nc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new bl(wl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hy{constructor(e){this._methodName=e}}class Wy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bl(wl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bl(wl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pl(this._lat,e._lat)||Pl(this._long,e._long)}}const Qy=/^__.*__$/;class Yy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new yd(e,this.data,this.fieldMask,t,this.fieldTransforms):new gd(e,this.data,t,this.fieldTransforms)}}class Jy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new yd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $y(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gl()}}class Xy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return fv(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if($y(this.du)&&Qy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Zy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bm(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xy({du:e,methodName:t,wu:n,path:jl.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ev(e){const t=e._freezeSettings(),n=Bm(e._databaseId);return new Zy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Su(s.merge||s.mergeFields?2:0,t,n,i);uv("Data must be an object, but it was:",a,r);const o=ov(r,a);let l,u;if(s.merge)l=new ec(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=cv(t,r,n);if(!a.contains(i))throw new bl(wl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));pv(e,i)||e.push(i)}l=new ec(e),u=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=a.fieldTransforms;return new Yy(new Rc(o),l,u)}class nv extends Hy{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nv}}function rv(e,t,n,r){const i=e.Su(1,t,n);uv("Data must be an object, but it was:",i,r);const s=[],a=Rc.empty();Hu(r,((e,r)=>{const o=dv(t,e,n);r=st(r);const l=i.fu(o);if(r instanceof nv)s.push(o);else{const e=av(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new ec(s);return new Jy(a,o,i.fieldTransforms)}function iv(e,t,n,r,i,s){const a=e.Su(1,t,n),o=[cv(t,r,n)],l=[i];if(s.length%2!=0)throw new bl(wl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(cv(t,s[d])),l.push(s[d+1]);const u=[],c=Rc.empty();for(let d=o.length-1;d>=0;--d)if(!pv(u,o[d])){const e=o[d];let t=l[d];t=st(t);const n=a.fu(e);if(t instanceof nv)u.push(e);else{const r=av(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ec(u);return new Jy(c,h,a.fieldTransforms)}function sv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return av(n,e.Su(r?4:3,t))}function av(e,t){if(lv(e=st(e)))return uv("Unsupported field value:",t,e),ov(e,t);if(e instanceof Hy)return function(e,t){if(!$y(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=av(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=st(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ll.fromDate(e);return{timestampValue:Xd(t.serializer,n)}}if(e instanceof Ll){const n=new Ll(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xd(t.serializer,n)}}if(e instanceof Wy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ky)return{bytesValue:Zd(t.serializer,e._byteString)};if(e instanceof Oy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:nf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(xy(e)))}(e,t)}function ov(e,t){const n={};return Wu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hu(e,((e,r)=>{const i=av(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ll||e instanceof Wy||e instanceof Ky||e instanceof Oy||e instanceof Hy)}function uv(e,t,n){if(!lv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=xy(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function cv(e,t,n){if((t=st(t))instanceof Gy)return t._internalPath;if("string"==typeof t)return dv(e,t);throw fv("Field path arguments must be of type string or ",e,!1,void 0,n)}const hv=new RegExp("[~\\*/\\[\\]]");function dv(e,t,n){if(t.search(hv)>=0)throw fv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Gy(...t.split("."))._internalPath}catch(ei){throw fv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function fv(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new bl(wl.INVALID_ARGUMENT,o+e+l)}function pv(e,t){return e.some((e=>e.isEqual(t)))}class mv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gv extends mv{data(){return super.data()}}function yv(e,t){return"string"==typeof t?dv(e,t):t instanceof Gy?t._internalPath:t._delegate._internalPath}function vv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bl(wl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class bv extends wv{}function Sv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof wv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof _v)).length,n=e.filter((e=>e instanceof Iv)).length;if(t>1||t>0&&n>0)throw new bl(wl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Iv extends bv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Iv(e,t,n)}_apply(e){const t=this._parse(e);return Cv(e._query,t),new Ry(e.firestore,e.converter,Ih(e._query,t))}_parse(e){const t=ev(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new bl(wl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Tv(a,s);const t=[];for(const n of a)t.push(kv(r,e,n));o={arrayValue:{values:t}}}else o=kv(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Tv(a,s),o=sv(n,t,a,"in"===s||"not-in"===s);return Bc.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ev(e,t,n){const r=t,i=yv("where",e);return Iv._create(i,r,n)}class _v extends wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _v(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:qc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Cv(n,i),n=Ih(n,i)}(e._query,t),new Ry(e.firestore,e.converter,Ih(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function kv(e,t,n){if("string"==typeof(n=st(n))){if(""===n)throw new bl(wl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vh(t)&&-1!==n.indexOf("/"))throw new bl(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ul.fromString(n));if(!zl.isDocumentKey(r))throw new bl(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Sc(e,new zl(r))}if(n instanceof Oy)return Sc(e,n._key);throw new bl(wl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xy(n),"."))}function Tv(e,t){if(!Array.isArray(e)||0===e.length)throw new bl(wl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Cv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bl(wl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bl(wl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class xv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Hu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Wy(sc(e.latitude),sc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=lc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){const t=ic(e);return new Ll(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ul.fromString(e);yl(Cf(n));const r=new hc(n.get(1),n.get(3)),i=new zl(n.popFirst(5));return r.isEqual(t)||fl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Nv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Av extends mv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Pv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(yv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Pv extends Av{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Rv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Pv(this._firestore,this._userDataWriter,n.key,n,new Dv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bl(wl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Pv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Pv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ov(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ov(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gl()}}function Lv(e){e=Ny(e,Oy);const t=Ny(e.firestore,Vy);return Sy(jy(t),e._key).then((n=>zv(t,e,n)))}class Mv extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ky(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oy(this.firestore,null,t)}}function Fv(e){e=Ny(e,Ry);const t=Ny(e.firestore,Vy),n=jy(t),r=new Mv(t);return vv(e._query),Iy(n,e._query).then((n=>new Rv(t,r,e,n)))}function Uv(e,t,n){e=Ny(e,Oy);const r=Ny(e.firestore,Vy),i=ev(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=st(t))||t instanceof Gy?iv(i,"updateDoc",e._key,t,n,o):rv(i,"updateDoc",e._key,t),jv(r,[s.toMutation(e._key,ld.exists(!0))])}function Vv(e,t){const n=Ny(e.firestore,Vy),r=Fy(e),i=Nv(e.converter,t);return jv(n,[tv(ev(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ld.exists(!1))]).then((()=>r))}function jv(e,t){return function(e,t){const n=new Sl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ly(e);try{const e=await function(e,t){const n=vl(e),r=Ll.now(),i=t.reduce(((e,t)=>e.add(t.key)),Bh());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Rh(),l=Bh();return n.os.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=pd(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new yd(e.key,t,Oc(t.value.mapValue),ld.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Mh(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Qu(Pl)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await iy(r,e.changes),await hg(r.remoteStore)}catch(e){const t=kg(e,"Failed to persist write");n.reject(t)}}(await wy(e),t,n))),n.promise}(jy(e),t)}function zv(e,t,n){const r=n.docs.get(t._key),i=new Mv(e);return new Av(e,i,t._key,r,new Dv(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ul=e}(Qt),Kt(new at("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Vy(new kl(e.getProvider("auth-internal")),new Nl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bl(wl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),$t(ol,"4.4.3",e),$t(ol,"4.4.3","esm2017")}();function Bv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function qv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kv=qv,Gv=new Ge("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Hv=new gt("@firebase/auth");function Wv(e){if(Hv.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hv.error("Auth (".concat(Qt,"): ").concat(e),...n)}}function Qv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $v(e,...n)}function Yv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $v(e,...n)}function Jv(e,t,n){const r=Object.assign(Object.assign({},Kv()),{[t]:n});return new Ge("auth","Firebase",r).create(t,{appName:e.name})}function $v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Gv.create(e,...n)}function Xv(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $v(t,...r)}}function Zv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wv(t),new Error(t)}function ew(e,t){e||Zv(t)}function tw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function nw(){return"http:"===rw()||"https:"===rw()}function rw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class iw{constructor(e,t){this.shortDelay=e,this.longDelay=t,ew(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(nw()||je()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function sw(e,t){ew(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class aw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Zv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Zv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Zv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lw=new iw(3e4,6e4);function uw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function cw(e,t,n,r){return hw(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Ye(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),aw.fetch()(fw(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function hw(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ow),t);try{const t=new mw(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw gw(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw gw(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw gw(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw gw(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Jv(e,o,a);Qv(e,o)}}catch(bI){if(bI instanceof Ke)throw bI;Qv(e,"network-request-failed",{message:String(bI)})}}async function dw(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await cw(e,t,n,r,i);return"mfaPendingCredential"in s&&Qv(e,"multi-factor-auth-required",{_serverResponse:s}),s}function fw(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?sw(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function pw(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mw{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Yv(this.auth,"network-request-failed"))),lw.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function gw(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yv(e,t,r);return i.customData._tokenResponse=n,i}function yw(e){return void 0!==e&&void 0!==e.enterprise}class vw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pw(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ww(e,t){return cw(e,"GET","/v2/recaptchaConfig",uw(e,t))}function bw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(bI){}}function Sw(e){return 1e3*Number(e)}function Iw(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Wv("JWT malformed, contained fewer than 3 sections"),null;try{const e=Pe(n);return e?JSON.parse(e):(Wv("Failed to decode base64 JWT payload"),null)}catch(bI){return Wv("Caught error parsing JWT payload as JSON",null===bI||void 0===bI?void 0:bI.toString()),null}}async function Ew(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(bI){throw bI instanceof Ke&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(bI)&&e.auth.currentUser===e&&await e.auth.signOut(),bI}}class _w{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(bI){return void((null===bI||void 0===bI?void 0:bI.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class kw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bw(this.lastLoginAt),this.creationTime=bw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tw(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ew(e,async function(e,t){return cw(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Xv(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Bv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kw(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Cw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xv(e.idToken,"internal-error"),Xv("undefined"!==typeof e.idToken,"internal-error"),Xv("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Iw(e);return Xv(t,"internal-error"),Xv("undefined"!==typeof t.exp,"internal-error"),Xv("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xv(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await hw(e,{},(async()=>{const n=Ye({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=fw(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aw.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Cw;return n&&(Xv("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xv("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xv("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cw,this.toJSON())}_performRefresh(){return Zv("not implemented")}}function xw(e,t){Xv("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Nw{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _w(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ew(this,this.stsTokenManager.getToken(this.auth,e));return Xv(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=st(e),r=await n.getIdToken(t),i=Iw(r);Xv(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:bw(Sw(i.auth_time)),issuedAtTime:bw(Sw(i.iat)),expirationTime:bw(Sw(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=st(e);await Tw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xv(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nw(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xv(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Tw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ew(this,async function(e,t){return cw(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:S,stsTokenManager:I}=t;Xv(v&&I,e,"internal-error");const E=Cw.fromJSON(this.name,I);Xv("string"===typeof v,e,"internal-error"),xw(c,e.name),xw(h,e.name),Xv("boolean"===typeof w,e,"internal-error"),Xv("boolean"===typeof b,e,"internal-error"),xw(d,e.name),xw(f,e.name),xw(p,e.name),xw(m,e.name),xw(g,e.name),xw(y,e.name);const _=new Nw({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(_.providerData=S.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Cw;r.updateFromServerResponse(t);const i=new Nw({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Tw(i),i}}const Dw=new Map;function Aw(e){ew(e instanceof Function,"Expected a class definition");let t=Dw.get(e);return t?(ew(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Dw.set(e,t),t)}class Pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pw.type="NONE";const Rw=Pw;function Ow(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Lw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ow(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ow("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nw._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Lw(Aw(Rw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Aw(Rw);const s=Ow(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Nw._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Lw(i,e,n)):new Lw(i,e,n)}}function Mw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bw(t))return"Blackberry";if(qw(t))return"Webos";if(Uw(t))return"Safari";if((t.includes("chrome/")||Vw(t))&&!t.includes("edge/"))return"Chrome";if(zw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Fw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/firefox\//i.test(e)}function Uw(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/crios\//i.test(e)}function jw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iemobile/i.test(e)}function zw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/android/i.test(e)}function Bw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/blackberry/i.test(e)}function qw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/webos/i.test(e)}function Kw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Gw(){return function(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Hw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return Kw(e)||zw(e)||qw(e)||Bw(e)||/windows phone/i.test(e)||jw(e)}function Ww(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mw(Ve());break;case"Worker":t="".concat(Mw(Ve()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qt,"/").concat(r)}class Qw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(bI){r(bI)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(bI){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===bI||void 0===bI?void 0:bI.message})}}}class Yw{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Jw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xw(this),this.idTokenSubscription=new Xw(this),this.beforeStateQueue=new Qw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Aw(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Lw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(bI){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(bI){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(bI)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xv(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(bI){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tw(e)}catch(bI){if((null===bI||void 0===bI?void 0:bI.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?st(e):null;return t&&Xv(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xv(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Aw(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return cw(e,"GET","/v2/passwordPolicy",uw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Yw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ge("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return cw(e,"POST","/v2/accounts:revokeToken",uw(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Aw(e)||this._popupRedirectResolver;Xv(t,this,"argument-error"),this.redirectPersistenceManager=await Lw.create(this,[Aw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xv(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xv(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ww(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Hv.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hv.warn("Auth (".concat(Qt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function $w(e){return st(e)}class Xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Xe(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Xv(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eb(e){return Zw.loadJS(e)}function tb(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class nb{constructor(e){this.type="recaptcha-enterprise",this.auth=$w(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;yw(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ww(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new vw(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&yw(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Zw.recaptchaEnterpriseScript;0!==t.length&&(t+=i),eb(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function rb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new nb(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ib(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rb(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await rb(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function sb(e,t,n){const r=$w(e);Xv(r._canInitEmulator,r,"emulator-config-failed"),Xv(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ab(t),{host:a,port:o}=function(e){const t=ab(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ob(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ob(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ab(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ob(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class lb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zv("not implemented")}_getIdTokenResponse(e){return Zv("not implemented")}_linkToIdToken(e,t){return Zv("not implemented")}_getReauthenticationResolver(e){return Zv("not implemented")}}async function ub(e,t){return cw(e,"POST","/v1/accounts:signUp",t)}async function cb(e,t){return dw(e,"POST","/v1/accounts:signInWithPassword",uw(e,t))}async function hb(e,t){return cw(e,"POST","/v1/accounts:sendOobCode",uw(e,t))}class db extends lb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new db(e,t,"password")}static _fromEmailAndCode(e,t){return new db(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ib(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",cb);case"emailLink":return async function(e,t){return dw(e,"POST","/v1/accounts:signInWithEmailLink",uw(e,t))}(e,{email:this._email,oobCode:this._password});default:Qv(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ib(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ub);case"emailLink":return async function(e,t){return dw(e,"POST","/v1/accounts:signInWithEmailLink",uw(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Qv(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fb(e,t){return dw(e,"POST","/v1/accounts:signInWithIdp",uw(e,t))}class pb extends lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qv("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Bv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new pb(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return fb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,fb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fb(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ye(t)}return e}}const mb={USER_NOT_FOUND:"user-not-found"};class gb extends lb{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return dw(e,"POST","/v1/accounts:signInWithPhoneNumber",uw(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await dw(e,"POST","/v1/accounts:signInWithPhoneNumber",uw(e,t));if(n.temporaryProof)throw gw(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return dw(e,"POST","/v1/accounts:signInWithPhoneNumber",uw(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),mb)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new gb({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class yb{constructor(e){var t,n,r,i,s,a;const o=Je($e(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(n=o.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Xv(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Je($e(e)).link,n=t?Je($e(t)).deep_link_id:null,r=Je($e(e)).deep_link_id;return(r?Je($e(r)).link:null)||r||n||t||e}(e);try{return new yb(t)}catch(n){return null}}}class vb{constructor(){this.providerId=vb.PROVIDER_ID}static credential(e,t){return db._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=yb.parseLink(t);return Xv(n,"argument-error"),db._fromEmailAndCode(e,n.code,n.tenantId)}}vb.PROVIDER_ID="password",vb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",vb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bb extends wb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sb extends bb{constructor(){super("facebook.com")}static credential(e){return pb._fromParams({providerId:Sb.PROVIDER_ID,signInMethod:Sb.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sb.credentialFromTaggedObject(e)}static credentialFromError(e){return Sb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Sb.credential(t.oauthAccessToken)}catch(n){return null}}}Sb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sb.PROVIDER_ID="facebook.com";class Ib extends bb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pb._fromParams({providerId:Ib.PROVIDER_ID,signInMethod:Ib.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ib.credentialFromTaggedObject(e)}static credentialFromError(e){return Ib.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ib.credential(n,r)}catch(i){return null}}}Ib.GOOGLE_SIGN_IN_METHOD="google.com",Ib.PROVIDER_ID="google.com";class Eb extends bb{constructor(){super("github.com")}static credential(e){return pb._fromParams({providerId:Eb.PROVIDER_ID,signInMethod:Eb.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eb.credentialFromTaggedObject(e)}static credentialFromError(e){return Eb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Eb.credential(t.oauthAccessToken)}catch(n){return null}}}Eb.GITHUB_SIGN_IN_METHOD="github.com",Eb.PROVIDER_ID="github.com";class _b extends bb{constructor(){super("twitter.com")}static credential(e,t){return pb._fromParams({providerId:_b.PROVIDER_ID,signInMethod:_b.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _b.credentialFromTaggedObject(e)}static credentialFromError(e){return _b.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _b.credential(n,r)}catch(i){return null}}}async function kb(e,t){return dw(e,"POST","/v1/accounts:signUp",uw(e,t))}_b.TWITTER_SIGN_IN_METHOD="twitter.com",_b.PROVIDER_ID="twitter.com";class Tb{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Nw._fromIdTokenResponse(e,n,r),s=Cb(n);return new Tb({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Cb(n);return new Tb({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Cb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class xb extends Ke{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,xb.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new xb(e,t,n,r)}}function Nb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw xb._fromErrorAndOperation(e,n,t,r);throw n}))}async function Db(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ew(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tb._forOperation(e,"link",r)}async function Ab(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Ew(e,Nb(r,i,t,e),n);Xv(s.idToken,r,"internal-error");const a=Iw(s.idToken);Xv(a,r,"internal-error");const{sub:o}=a;return Xv(e.uid===o,r,"user-mismatch"),Tb._forOperation(e,i,s)}catch(bI){throw(null===bI||void 0===bI?void 0:bI.code)==="auth/".concat("user-not-found")&&Qv(r,"user-mismatch"),bI}}async function Pb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Nb(e,r,t),s=await Tb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Rb(e,t){return Pb($w(e),t)}function Ob(e,t,n){var r;Xv((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xv("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xv(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xv(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Lb(e){const t=$w(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Mb(e,t){await async function(e,t){return cw(e,"POST","/v1/accounts:update",uw(e,t))}(st(e),{oobCode:t})}async function Fb(e,t){const n=st(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ob(n.auth,r,t);const{email:i}=await async function(e,t){return hb(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ub(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=st(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ew(i,async function(e,t){return cw(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Vb(e,t,n,r){return st(e).onAuthStateChanged(t,n,r)}new WeakMap;const jb="__sak";class zb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jb,"1"),this.storage.removeItem(jb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bb extends zb{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ve();return Uw(e)||Kw(e)}()&&function(){try{return!(!window||window===window.top)}catch(bI){return!1}}(),this.fallbackToPolling=Hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Gw()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bb.type="LOCAL";const qb=Bb;class Kb extends zb{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kb.type="SESSION";const Gb=Kb;class Hb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Hb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Wb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Hb.receivers=[];class Qb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Wb("",20);r.port1.start();const u=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Yb(){return window}function Jb(){return"undefined"!==typeof Yb().WorkerGlobalScope&&"function"===typeof Yb().importScripts}const $b="firebaseLocalStorageDb",Xb="firebaseLocalStorage",Zb="fbase_key";class eS{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function tS(e,t){return e.transaction([Xb],t?"readwrite":"readonly").objectStore(Xb)}function nS(){const e=indexedDB.open($b,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Xb,{keyPath:Zb})}catch(bI){n(bI)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Xb)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase($b);return new eS(e).toPromise()}(),t(await nS()))}))}))}async function rS(e,t,n){const r=tS(e,!0).put({[Zb]:t,value:n});return new eS(r).toPromise()}function iS(e,t){const n=tS(e,!0).delete(t);return new eS(n).toPromise()}class sS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await nS()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(bI){if(t++>3)throw bI;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hb._getInstance(Jb()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Qb(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nS();return await rS(e,jb,"1"),await iS(e,jb),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>rS(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=tS(e,!1).get(t),r=await new eS(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>iS(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=tS(e,!1).getAll();return new eS(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}sS.type="LOCAL";const aS=sS;tb("rcb"),new iw(3e4,6e4);const oS="recaptcha";async function lS(e,t,n){var r;const i=await n.verify();try{let s;if(Xv("string"===typeof i,e,"argument-error"),Xv(n.type===oS,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xv("enroll"===t.type,e,"internal-error");const n=await function(e,t){return cw(e,"POST","/v2/accounts/mfaEnrollment:start",uw(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xv("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xv(n,e,"missing-multi-factor-info");const a=await function(e,t){return cw(e,"POST","/v2/accounts/mfaSignIn:start",uw(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return cw(e,"POST","/v1/accounts:sendVerificationCode",uw(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class uS{constructor(e){this.providerId=uS.PROVIDER_ID,this.auth=$w(e)}verifyPhoneNumber(e,t){return lS(this.auth,e,st(t))}static credential(e,t){return gb._fromVerification(e,t)}static credentialFromResult(e){const t=e;return uS.credentialFromTaggedObject(t)}static credentialFromError(e){return uS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?gb._fromTokenResponse(n,r):null}}function cS(e,t){return t?Aw(t):(Xv(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}uS.PROVIDER_ID="phone",uS.PHONE_SIGN_IN_METHOD="phone";class hS extends lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fb(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dS(e){return Pb(e.auth,new hS(e),e.bypassAuthState)}function fS(e){const{auth:t,user:n}=e;return Xv(n,t,"internal-error"),Ab(n,new hS(e),e.bypassAuthState)}async function pS(e){const{auth:t,user:n}=e;return Xv(n,t,"internal-error"),Db(n,new hS(e),e.bypassAuthState)}class mS{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(bI){this.reject(bI)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(bI){this.reject(bI)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dS;case"linkViaPopup":case"linkViaRedirect":return pS;case"reauthViaPopup":case"reauthViaRedirect":return fS;default:Qv(this.auth,"internal-error")}}resolve(e){ew(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ew(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gS=new iw(2e3,1e4);class yS extends mS{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,yS.currentPopupAction&&yS.currentPopupAction.cancel(),yS.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xv(e,this.auth,"internal-error"),e}async onExecution(){ew(1===this.filter.length,"Popup operations only handle one event");const e=Wb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Yv(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Yv(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yS.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Yv(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,gS.get())};e()}}yS.currentPopupAction=null;const vS="pendingRedirect",wS=new Map;class bS extends mS{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wS.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ES(t),r=IS(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(bI){e=()=>Promise.reject(bI)}wS.set(this.auth._key(),e)}return this.bypassAuthState||wS.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function SS(e,t){wS.set(e._key(),t)}function IS(e){return Aw(e._redirectPersistence)}function ES(e){return Ow(vS,e.config.apiKey,e.name)}async function _S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=$w(e),i=cS(r,t),s=new bS(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class kS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!CS(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yv(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(TS(e))}saveEventToCache(e){this.cachedEventUids.add(TS(e)),this.lastProcessedEventTime=Date.now()}}function TS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function CS(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const xS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NS=/^https?/;async function DS(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return cw(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(AS(r))return}catch(n){}Qv(e,"unauthorized-domain")}function AS(e){const t=tw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!NS.test(n))return!1;if(xS.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const PS=new iw(3e4,6e4);function RS(){const e=Yb().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function OS(e){return new Promise(((t,n)=>{var r,i,s;function a(){RS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{RS(),n(Yv(e,"network-request-failed"))},timeout:PS.get()})}if(null===(i=null===(r=Yb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Yb().gapi)||void 0===s?void 0:s.load)){const t=tb("iframefcb");return Yb()[t]=()=>{gapi.load?a():n(Yv(e,"network-request-failed"))},eb("".concat(Zw.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw LS=null,e}))}let LS=null;const MS=new iw(5e3,15e3),FS="__/auth/iframe",US="emulator/auth/iframe",VS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zS(e){const t=e.config;Xv(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sw(t,US):"https://".concat(e.config.authDomain,"/").concat(FS),r={apiKey:t.apiKey,appName:e.name,v:Qt},i=jS.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ye(r).slice(1))}async function BS(e){const t=await function(e){return LS=LS||OS(e),LS}(e),n=Yb().gapi;return Xv(n,e,"internal-error"),t.open({where:document.body,url:zS(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VS,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Yv(e,"network-request-failed"),s=Yb().setTimeout((()=>{r(i)}),MS.get());function a(){Yb().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const qS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class KS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(bI){}}}function GS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},qS),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Ve().toLowerCase();n&&(o=Vw(u)?"_blank":n),Fw(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Kw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new KS(null);const h=window.open(t||"",o,c);Xv(h,e,"popup-blocked");try{h.focus()}catch(bI){}return new KS(h)}const HS="__/auth/handler",WS="emulator/auth/handler",QS=encodeURIComponent("fac");async function YS(e,t,n,r,i,s){Xv(e.config.authDomain,e,"auth-domain-config-required"),Xv(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qt,eventId:i};if(t instanceof wb){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof bb){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?"#".concat(QS,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(HS);return sw(t,WS)}(e),"?").concat(Ye(o).slice(1)).concat(u)}const JS="webStorageSupport";const $S=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=_S,this._overrideRedirectResult=SS}async _openPopup(e,t,n,r){var i;ew(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return GS(e,await YS(e,t,n,tw(),r),Wb())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Yb().location.href=e}(await YS(e,t,n,tw(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ew(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await BS(e),n=new kS(e);return t.register("authEvent",(t=>{Xv(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(JS,{type:JS},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[JS];void 0!==i&&t(!!i),Qv(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hw()||Uw()||Kw()}};var XS="@firebase/auth",ZS="1.6.1";class eI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xv(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const tI=Fe("authIdTokenMaxAge")||300;let nI=null;var rI;!function(e){Zw=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Yv("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),rI="Browser",Kt(new at("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Xv(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:rI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ww(rI)},u=new Jw(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Aw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Kt(new at("auth-internal",(e=>(e=>new eI(e))($w(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),$t(XS,ZS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(rI)),$t(XS,ZS,"esm2017");const iI=Yt({apiKey:"AIzaSyANYtpLwLwhtjYEURfI-2UKb7-BSyNTMLs",authDomain:"dms-helper.firebaseapp.com",projectId:"dms-helper",storageBucket:"dms-helper.appspot.com",messagingSenderId:"1042518640882",appId:"1:1042518640882:web:d13b5caf698ee00dae286b",measurementId:"G-K06LVX9ZBN"}),sI=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();e=st(e);const t=Gt(e,ir);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Gt(e,ir);if(n.isInitialized()){const e=n.getImmediate();if(We(t,n.getOptions()))return e;throw hr.create("already-initialized")}const r=n.initialize({options:t})}(e)}(iI),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();const t=Gt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Gt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(We(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Qv(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:$S,persistence:[aS,qb,Gb]}),r=Fe("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>tI)return;const r=null===t||void 0===t?void 0:t.token;nI!==r&&(nI=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){st(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){st(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Le("auth");return s&&sb(n,"http://".concat(s)),n}(iI)),aI=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Gt("object"==typeof e?e:Jt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Le(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Py(r,...e)}return r}(iI);(function(e,t){qy(e=Ny(e,Vy));const n=jy(e);if(n._uninitializedComponentsProvider)throw new bl(wl.FAILED_PRECONDITION,"SDK cache is already specified.");pl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new hy;return By(n,i,new cy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))})(aI).catch((e=>{"failed-precondition"==e.code?console.error("Multiple tabs open, persistence can only be enabled in one tab at a time."):"unimplemented"==e.code&&console.error("The current browser does not support all of the features required to enable offline persistence.")}));var oI=n(723);const lI=()=>{const[e,n]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=sI.onAuthStateChanged((e=>{n(e)}));return()=>e()}),[]);return(0,oI.jsx)("nav",{children:(0,oI.jsxs)("ul",{className:"nav-links",children:[(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/",children:"Home"})}),(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/campaign-organizer",children:"Campaign Organizer"})}),(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/encounter-builder",children:"Encounter Builder"})}),(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/npc-generator",children:"NPC Generator"})}),e?(0,oI.jsxs)("li",{className:"auth-link user-menu",children:["Welcome, ",e.displayName||"User","!",(0,oI.jsxs)("ul",{className:"submenu",children:[(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/user-profile",children:"Profile"})}),(0,oI.jsx)("li",{children:(0,oI.jsx)("button",{onClick:async()=>{try{await sI.signOut()}catch(e){console.error("Error signing out: ",e)}},children:"Logout"})})]})]}):(0,oI.jsx)("li",{className:"auth-link",children:(0,oI.jsx)(_e,{to:"/signup",children:"Signup/Login"})})]})})},uI=e=>{let{isOpen:t,onClose:n,children:r}=e;return t?(0,oI.jsx)("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n,children:(0,oI.jsx)("div",{style:{background:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:20},onClick:e=>e.stopPropagation(),children:r})}):null},cI=e=>{let{campaigns:n,setCampaigns:r}=e;const[i,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)(""),[l,u]=(0,t.useState)(""),[c,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=Vb(sI,(e=>{h(e),e&&d(e.uid)}));return()=>e()}),[]),(0,t.useEffect)((()=>{Vb(sI,(e=>{if(h(e),e)d(e.uid);else{const e=JSON.parse(sessionStorage.getItem("campaigns"))||[];r(e)}}))}),[]);const d=async e=>{const t=Sv(My(aI,"campaigns"),Ev("userId","==",e)),n=(await Fv(t)).docs.map((e=>({id:e.id,...e.data()})));r(n)};return(0,oI.jsxs)("div",{children:[(0,oI.jsxs)("div",{className:"campaign-grid",children:[n.map((e=>(0,oI.jsx)(_e,{to:"/campaign/".concat(e.id),className:"campaign-box",children:(0,oI.jsx)("h3",{children:e.title})},e.id))),(0,oI.jsx)("div",{className:"campaign-box add-new",onClick:()=>s(!0),children:(0,oI.jsx)("h3",{children:"+ Add New Campaign"})}),(0,oI.jsxs)(uI,{isOpen:i,onClose:()=>s(!1),children:[(0,oI.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Campaign Title"}),(0,oI.jsx)("textarea",{value:l,onChange:e=>u(e.target.value),placeholder:"Campaign Description"}),(0,oI.jsx)("button",{onClick:async()=>{if(!a.trim())return void alert("Campaign title is required.");let e={title:a,description:l,gameName:"Dungeon Crawl Classics",stats:{numberOfMonstersSlain:0,treasureCollected:"0 gold"},nextSession:"Not scheduled",notes:[]};if(c){const t=Fy(aI,"users",c.uid),i=await Lv(t);let s=i.exists()&&i.data().campaignCount?i.data().campaignCount+1:1;const a=await Vv(My(aI,"campaigns"),{...e,userId:c.uid,numericId:s});await Uv(t,{campaignCount:s}),e.id=a.id,e.numericId=s,r([...n,e])}else{e.id=String(n.length+1),e.numericId=n.length+1;const t=[...n,e];r(t),sessionStorage.setItem("campaigns",JSON.stringify(t))}o(""),u(""),s(!1)},children:"Create Campaign"})]})]}),!c&&(0,oI.jsxs)("div",{className:"test-mode-warning",children:["Warning! You are in Test Mode. Every Action you do will only be saved in your current session. If you want to save your progress, please ",(0,oI.jsx)(_e,{to:"/signup",children:"register"})," or ",(0,oI.jsx)(_e,{to:"/login",children:"sign in"}),"."]})]})},hI=e=>{let{campaigns:n}=e;const{id:r}=function(){let{matches:e}=t.useContext(W),n=e[e.length-1];return n?n.params:{}}(),[i,s]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[l,u]=(0,t.useState)([]);(0,t.useEffect)((()=>{Vb(sI,(e=>{if(o(e),e){(async()=>{const e=Fy(aI,"campaigns",r),t=await Lv(e);t.exists()?(s({id:t.id,...t.data()}),c(t.id)):console.log("No such campaign!")})()}else{const e=n.find((e=>e.id.toString()===r));s(e),c(e.id)}}))}),[r,n]);const c=async e=>{const t=Sv(My(aI,"npcs"),Ev("campaignId","==",e)),n=(await Fv(t)).docs.map((e=>({id:e.id,...e.data()})));u(n)};return i?(0,oI.jsxs)("div",{children:[(0,oI.jsx)("h2",{children:i.title}),(0,oI.jsx)("p",{children:i.description}),(0,oI.jsx)("h3",{children:"Game Details"}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Game Name:"})," ",i.gameName]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Next Session:"})," ",i.nextSession]}),(0,oI.jsx)("h3",{children:"Fun Stats"}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Monsters Slain:"})," ",i.stats?i.stats.numberOfMonstersSlain:"N/A"]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Treasure Collected:"})," ",i.stats?i.stats.treasureCollected:"N/A"]}),(0,oI.jsx)("h3",{children:"Notes"}),(0,oI.jsx)("ul",{children:i.notes.map(((e,t)=>(0,oI.jsx)("li",{children:e},t)))}),(0,oI.jsx)("h3",{children:"NPCs"}),(0,oI.jsx)("ul",{children:l.map(((e,t)=>(0,oI.jsx)("li",{children:(0,oI.jsx)(_e,{to:"/npcs/".concat(e.id),children:e.name})},t)))})]}):(0,oI.jsx)("div",{children:"Campaign not found"})},dI=()=>(0,oI.jsxs)("div",{className:"main-site",children:[(0,oI.jsx)("h1",{children:"Welcome to the Dungeon Master's Guide!"}),(0,oI.jsx)("p",{children:"This is your one-stop hub for managing your D&D campaigns, organizing encounters, generating NPCs, and more."}),(0,oI.jsxs)("div",{className:"features",children:[(0,oI.jsxs)("div",{className:"feature-item",children:[(0,oI.jsx)("h2",{children:"Campaign Organizer"}),(0,oI.jsx)("p",{children:"Manage your campaigns, track progress, and keep all your notes organized."}),(0,oI.jsx)(_e,{to:"/campaign-organizer",children:"Go to Campaign Organizer"})]}),(0,oI.jsxs)("div",{className:"feature-item",children:[(0,oI.jsx)("h2",{children:"Encounter Builder"}),(0,oI.jsx)("p",{children:"Plan your encounters, set up challenges, and prepare for battle."}),(0,oI.jsx)(_e,{to:"/encounter-builder",children:"Go to Encounter Builder"})]}),(0,oI.jsxs)("div",{className:"feature-item",children:[(0,oI.jsx)("h2",{children:"NPC Generator"}),(0,oI.jsx)("p",{children:"Create detailed NPCs quickly to populate your world with unique characters."}),(0,oI.jsx)(_e,{to:"/npc-generator",children:"Go to NPC Generator"})]})]})]}),fI=()=>{const[e,n]=(0,t.useState)([]);return(0,oI.jsxs)("div",{className:"encounter-builder",children:[(0,oI.jsx)("h1",{children:"Encounter Builder"}),(0,oI.jsx)("p",{children:"Plan and manage your encounters by adding monsters and setting the scene for your next adventure."}),(0,oI.jsx)("div",{className:"monster-list",children:e.map(((e,t)=>(0,oI.jsx)("div",{className:"monster-item",children:(0,oI.jsx)("h2",{children:e.name})},t)))}),(0,oI.jsx)("div",{className:"add-monster-form"})]})},pI=()=>{var e;const[n,r]=(0,t.useState)({name:"",race:"",gender:"",profession:""}),[i,s]=(0,t.useState)(JSON.parse(sessionStorage.getItem("campaigns"))||[]),[a,o]=(0,t.useState)(i.length>0?null===(e=i[0])||void 0===e?void 0:e.id:""),[l,u]=(0,t.useState)(""),[c,h]=(0,t.useState)(""),[d,f]=(0,t.useState)(JSON.parse(sessionStorage.getItem("npcs"))||[]),[p,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=Vb(sI,(e=>{m(e),e?y(e.uid):g()}));return()=>e()}),[]);const g=()=>{const e=JSON.parse(sessionStorage.getItem("campaigns"))||[];s(e),o(e.length>0?e[0].id:"")},y=async e=>{const t=Sv(My(aI,"campaigns"),Ev("userId","==",e)),n=(await Fv(t)).docs.map((e=>({id:e.id,...e.data()})));s(n),o(n.length>0?n[0].id:"")};(0,t.useEffect)((()=>{i.length>0&&!i.some((e=>e.id===a))&&o(i[0].id)}),[i]);const v={Human:{Male:["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric","Stephen","Andrew","Raymond","Gregory","Joshua","Jerry","Dennis","Walter","Patrick","Peter","Harold","Douglas","Henry","Carl","Arthur","Ryan"],Female:["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna","Rebecca","Virginia","Kathleen","Pamela","Martha","Debra","Amanda","Stephanie","Carolyn","Christine","Marie","Janet","Catherine","Frances","Ann","Joyce","Diane"],Family:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins"]},Elf:{Male:["Aelar","Aerdeth","Alathar","Ariandar","Arromar","Baelor","Berrian","Caranthir","Dorathil","Elenion","Felaern","Gaerlan","Haladavar","Iefyr","Jassin","Kaelthas","Laethan","Maiele","Naevan","Oleran","Paeral","Quarion","Raegel","Saevel","Talathar","Uldor","Vaalyun","Xilfir","Yestar","Zylphar","Aelor","Belegon","Celadon","Drannor","Erenduil","Faenor","Galinndan","Heian","Iliphar","Janrel","Kyren","Lorandar","Meliamne","Neldor","Orophin","Pharom","Quilathe","Rolen","Saradoc","Torian"],Female:["Aelene","Althaea","Anastrianna","Bethrynna","Caelynn","Drusilia","Enna","Faenya","Gaelira","Haleth","Ielenia","Jenala","Kethryllia","Leshanna","Maelyrra","Nuala","Oriana","Phaerl","Quelenna","Rennyn","Sariel","Thalia","Uneath","Vadania","Xanaphia","Yllana","Zephyr","Ariadne","Briseis","Celebrian","Dariel","Eilistraee","Firael","Giliath","Hacathra","Ithilwen","Jathal","Lireal","Melian","Nyssa","Oleria","Paelias","Quillathe","Rina","Sylvara","Tiaathque","Undomiel","Veladonna","Ysera"],Family:["Amakiir","Caundur","Eladithas","Galadon","Ilphelkiir","Liadon","Meliamne","Nai'lo","Siannodel","Xiloscient","Yaeldrin","Aelasar","Braegen","Durothil","Elaqirelle","Firahel","Gweyr","Holimion","Iathrana","Jassin","Kyrenaian","Lanliss","Mystralath","Nuindil","Ostoroth","Pholontor","Rhothomir","Sylven","Tiltathana","Uldreiyn","Vandiir","Wysarion","Xilriven","Yelpeiros","Zolerii","Aeravansel","Briarfell","Cithreth","Dewinstral","Eathalena","Faelyn","Goltorah","Hanali","Inchel","Jhaartael","Koehlanna","Lathalas","Maendellyn","Na\xeflo","Orivan","Pyralis","Quisys","Rivleam","Sylmiir","Tellynnan"]},Dwarf:{Male:["Brom","Thrain","Durnar","Grognar","Harbek","Kildrak","Morgran","Orsik","Rurik","Taklinn","Dolgrin","Gardain","Hurn","Kargien","Nalral","Dagnal","Flint","Barendd","Gurdek","Jargen","Kurdek","Marden","Nurval","Oskar","Rangrim","Regdar","Tordek","Urgram","Vondal","Adrik","Alberich","Baern","Brottor","Bruenor","Dain","Dalgal","Eberk","Einkil","Fargrim","Gimurt","Harald","Korlag","Lodar","Lunn","Magnar","Nordak","Olunt","Ragnok","Sindri","Tordak"],Female:["Amber","Artin","Audhild","Bardryn","Dagnal","Diesa","Eldeth","Falkrunn","Finellen","Gunnloda","Gurdis","Helja","Hlin","Kathra","Kristryd","Ilde","Liftrasa","Mardred","Riswynn","Sannl","Torbera","Torgga","Vistra","Beyla","Dorthe","Frida","Gerdur","Hilda","Kara","Linna","Morna","Orgha","Ragna","Sif","Therlin","Thodris","Torunn","Urda","Veklani","Welda","Anika","Brynja","Erika","Greta","Jora","Kirsten","Lisbet","Marit","Nissa","Runa"],Family:["Ironfist","Hammerstone","Silverforge","Bronzebeard","Copperpot","Steelforge","Goldpeak","Stonehammer","Ironheart","Steelshaper","Bricklayer","Coalborn","Deepdelver","Earthguard","Forgefire","Graveltoes","Hardback","Ironhewer","Leadbelly","Marblefist","Nickelback","Orecrusher","Pebblefoot","Quartzfist","Rockseeker","Slatehand","Tinvein","Underhill","Volcanoborn","Whetstone","Amberrock","Boulderbreaker","Cragsman","Driftminer","Earthborn","Flintfinder","Gemcutter","Horngrip","Ironband","Jewelcrafter","Keeneye","Firmroot","Softsinger","Loudshield","Proudwing","Quickblade","Rubblestone","Silvervein","Tunnelmaster","Vaultkeeper"]},Dragonborn:{Male:["Arjhan","Balasar","Bharash","Donaar","Ghesh","Heskan","Kriv","Medrash","Mehen","Nadarr","Pandjed","Patrin","Rhogar","Shamash","Shedinn","Tarhun","Torinn","Akrath","Barlen","Caxius","Drazir","Esburn","Falkrin","Grexij","Hisrith","Iojan","Jaxan","Korthul","Lhurmar","Moxal","Narjax","Othkent","Paxir","Quirash","Rathkran","Savax","Thaxar","Uxrin","Vexrish","Wyrmborn","Xarthon","Yarjerit","Zavrel","Azurin","Bixan","Draxon","Fenxar","Gharrix","Jurrash","Kalzir"],Female:["Akra","Biri","Daar","Farideh","Harann","Flavilar","Jheri","Kava","Korinn","Misrav","Nala","Perra","Raiann","Sora","Surina","Thava","Uadjit","Vezera","Zykroff","Welsa","Yrthra","Tzarei","Ezrina","Ovari","Ulphia","Fyrnna","Vorstra","Seraphis","Gurada","Hicaryn","Qizryn","Morqwen","Lirael","Zenphi","Biriz","Carophyl","Doriryn","Estroth","Fenzira","Ghysara","Herrix","Ixilya","Jaxira","Kythryl","Laryx","Moryn","Nystrum","Oxora","Pyxrin","Rysta"],Family:["Clethtinthiallor","Daardendrian","Delmirev","Drachedandion","Fenkenkabradon","Kepeshkmolik","Kerrhylon","Kimbatuul","Linxakasendalor","Myastan","Nemmonis","Norixius","Ophinshtalajiir","Prexijandilin","Shestendeliath","Turnuroth","Verthisathurgiesh","Yarjerit","Zephyr","Zofiasar","Amaxath","Brexanmor","Crystalmir","Dornxian","Exarthon","Fyrnstahl","Grixikar","Haxanmyr","Ixenthior","Jaxonyx","Kyrnxiros","Lythrex","Mystanor","Nyrxius","Ophyxikar","Pyrothil","Qyxorin","Rysthax","Syrnaxar","Tyranthax","Uxaril","Vexryn","Wyrmaxan","Xyranth","Ysthomar","Zaxarom","Axiroth","Byrnax","Cyroxar","Dyrnistor"]},Gnome:{Male:["Alston","Alvyn","Boddynock","Brocc","Burgell","Dimble","Eldon","Erky","Fonkin","Frug","Gerbo","Gimble","Glim","Jebeddo","Kellen","Namfoodle","Orryn","Roondar","Seebo","Sindri","Warryn","Wrenn","Zook","Fibblestib","Dabbledob","Gnorlin","Kuiper","Nackle","Miggledy","Ping","Quott","Raulnor","Sapplings","Tendertoe","Uvarkk","Vigg","Wiggan","Xavbin","Yebbeg","Zaffrab","Aleslosh","Bilbron","Coddleflop","Dingbos","Eldwin","Fablen","Grindle","Habble","Irrin","Jepp"],Female:["Bimpnottin","Breena","Caramip","Carlin","Donella","Duvamil","Ella","Ellyjobell","Ellywick","Lilli","Loopmottin","Lorilla","Mardnab","Nissa","Nyx","Oda","Orla","Roywyn","Shamil","Tana","Waywocket","Zanna","Ariena","Bilba","Cymbi","Drusilia","Elfi","Filiare","Gimblegyre","Helna","Illycor","Jilli","Knisper","Lilla","Miniver","Nebin","Olida","Pilwicken","Quilla","Roxi","Sabbi","Tilli","Ulla","Veni","Wixie","Xanthi","Yebbi","Zolli","Ambergleam"],Family:["Beren","Daergel","Folkor","Garrick","Nackle","Murnig","Ningel","Raulnor","Scheppen","Timbers","Turen","Aleslosh","Ashhearth","Badger","Cloak","Doublelock","Filchbatter","Fnipper","Ku","Nim","Oneshoe","Sparklegem","Stumbleduck","Fizzlebang","Gimlen","Hornbori","Ironfoot","Jabberknoll","Knickknack","Levershaft","Mugginns","Noggin","Oakenshield","Puddlewhistle","Quillsharpener","Rattlebag","Shortwick","Tinkertorque","Underbough","Voltorbolt","Wagglewig","Whistlesteam","Yardwand","Zephyrzoom","Amberwand","Bristleblitz","Cobblecrank","Dabblestomp","Eggbumble","Fizzlecrank"]},Halfling:{Male:["Alton","Ander","Cade","Corrin","Eldon","Errich","Finnan","Garret","Lindal","Lyle","Merric","Milo","Osborn","Perrin","Reed","Roscoe","Wellby","Andwise","Bilbo","Doder","Fodo","Gregor","Hobart","Lob","Mungo","Rollo","Samwise","Thodo","Waldo","Will","Antos","Brando","Cale","Dell","Eddie","Fildo","Gordo","Hal","Isen","Jasper","Kodo","Lopo","Matto","Nordo","Ollie","Podo","Quinto","Rando","Sammich","Togo"],Female:["Andry","Bree","Callie","Cora","Euphemia","Jillian","Kithri","Lavinia","Lidda","Merla","Nedda","Paela","Portia","Seraphina","Shaena","Trym","Vani","Verna","Amaryllis","Charmaine","Daisy","Daphne","Flora","Gilly","Jasmine","Lily","Rosie","Tansy","Zinnia","Alia","Bonny","Celia","Donna","Ethel","Fern","Greta","Hazel","Ivy","Jessie","Katy","Leena","Mina","Nola","Opal","Penny","Quilly","Ruby","Sally","Tina"],Family:["Brushgather","Goodbarrel","Greenbottle","High-hill","Hilltopple","Leagallow","Tealeaf","Thorngage","Tosscobble","Underbough","Bramblefoot","Appleblossom","Bigheart","Brightmoon","Brushgather","Cherrycheeks","Copperkettle","Deephollow","Elderberry","Fastfoot","Glenfellow","Goldfound","Goodroot","Goody","Greenleaf","High-hill","Hilltopple","Hogcollar","Ironfoot","Leafwalker","Marblefoot","Nimblefingers","Oatfarmer","Puddle","Quickstep","Riverjump","Sandwich","Silverpin","Smoothhands","Teapot","Thistletop","Tumblebelly","Underhill","Whispermouse","Willowbrook","Yellowtoes","Zephyrbreeze","Berrypicker","Cloudwatcher"]}},w=["Warrior","Mage","Blacksmith","Merchant","Scholar","Bard","Carpenter","Farmer","Hunter","Doctor","Alchemist","Cleric","Diplomat","Seamstress","Scribe","Tailor","Rogue","Paladin","Necromancer","Druid","Ranger","Artificer","Sorcerer","Assassin","Monk","Barbarian","Enchanter","Diviner","Illusionist","Beastmaster","Herbalist","Cartographer","Summoner","Thief","Warlock","Elementalist","Archaeologist","Spy","Dungeon Delver","Gladiator","Jeweler","Miner","Politician","Priest","Sailor","Smith","Tinker","Trapper","Brewer","Fletcher"],b=e=>e[Math.floor(Math.random()*e.length)];return(0,oI.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",margin:"auto",padding:"20px"},children:[(0,oI.jsx)("h2",{style:{textAlign:"center"},children:"Random NPC Generator"}),(0,oI.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,oI.jsxs)("label",{children:["Select Campaign:",(0,oI.jsx)("select",{value:a,onChange:e=>o(e.target.value),style:{marginLeft:"10px",padding:"5px",borderRadius:"5px"},children:i.map((e=>(0,oI.jsx)("option",{value:e.id,children:e.title},e.id)))})]})}),(0,oI.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,oI.jsx)("button",{onClick:()=>{let e=l||b(Object.keys(v)),t=Object.keys(v[e]).filter((e=>"Family"!==e)),n=c||b(t);const i=v[e][n],s=b(i),a=b(v[e].Family),o=b(w),u={name:"".concat(s," ").concat(a),race:e,gender:n,profession:o};r(u)},style:{marginLeft:"10px",padding:"8px 12px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",width:"120px",textAlign:"center"},children:"Generate NPC"})}),n.name&&(0,oI.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,oI.jsx)("h3",{children:"Generated NPC:"}),(0,oI.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"20px"},children:(0,oI.jsxs)("div",{style:{border:"1px solid #ddd",padding:"10px",borderRadius:"5px",textAlign:"left"},children:[(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Name:"})," ",n.name]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Race:"})," ",n.race]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Gender:"})," ",n.gender]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Profession:"})," ",n.profession]})]})}),(0,oI.jsx)("button",{onClick:async()=>{if(!n.name)return void alert("Please generate an NPC before saving.");const e={...n,campaignId:a};if(p)try{await Vv(My(aI,"npcs"),{...e,userId:p.uid}),alert("NPC saved successfully in the database!")}catch(t){console.error("Error saving the NPC: ",t),alert("Failed to save NPC.")}else{if(!(JSON.parse(sessionStorage.getItem("campaigns"))||[]).some((e=>e.id===a)))return void alert("Selected campaign does not exist.");const t=[...d,{...e,id:String(d.length+1)}];f(t),sessionStorage.setItem("npcs",JSON.stringify(t)),alert("NPC saved successfully in the session!")}},style:{alignSelf:"start",marginTop:"10px",padding:"8px 12px",borderRadius:"5px",cursor:"pointer",fontSize:"14px",width:"120px"},children:"Save NPC"})]}),(0,oI.jsxs)("div",{children:[(0,oI.jsx)("h3",{children:"Saved NPCs:"}),(0,oI.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px"},children:d.length>0?d.map(((e,t)=>(0,oI.jsxs)("div",{style:{border:"1px solid #ddd",padding:"10px",borderRadius:"5px"},children:[(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Race:"})," ",e.race]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Gender:"})," ",e.gender]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Profession:"})," ",e.profession]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Campaign ID:"})," ",e.campaignId]})]},t))):(0,oI.jsx)("p",{children:"No NPCs saved."})})]})]})},mI=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[u,c]=(0,t.useState)(!1),h=X();return(0,oI.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(""),c(!1),s)try{const t=await async function(e,t,n){const r=$w(e),i=ib(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kb),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lb(e),t})),a=await Tb._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(sI,e,r);await Ub(t.user,{displayName:s}),await Fb(t.user),await function(e,t,n){e=Ny(e,Oy);const r=Ny(e.firestore,Vy),i=Nv(e.converter,t,n);return jv(r,[tv(ev(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ld.none())])}(Fy(aI,"users",t.user.uid),{username:s,email:e,isVerified:!1}),await function(e){return st(e).signOut()}(sI),h("/check-email")}catch(o){l(o.message),"auth/email-already-in-use"===o.code&&(l("Email already in use. Please login."),c(!0))}else l("Please enter a username.")},children:[(0,oI.jsxs)("label",{children:["Username:",(0,oI.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,oI.jsxs)("label",{children:["Email:",(0,oI.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,oI.jsxs)("label",{children:["Password:",(0,oI.jsx)("input",{type:"password",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,oI.jsx)("button",{type:"submit",children:"Sign Up"}),o&&(0,oI.jsx)("p",{children:o}),u&&(0,oI.jsx)("button",{onClick:()=>{h("/login")},children:"Go to Login"})]})},gI=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),o=X();return(0,oI.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a("");try{const t=await function(e,t,n){return Rb(st(e),vb.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Lb(e),t}))}(sI,e,r);t.user.emailVerified?o("/"):(a("Please verify your email to continue."),sI.signOut())}catch(s){a(s.message)}},children:[(0,oI.jsxs)("label",{children:["Email:",(0,oI.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value)})]}),(0,oI.jsxs)("label",{children:["Password:",(0,oI.jsx)("input",{type:"password",value:r,onChange:e=>i(e.target.value)})]}),(0,oI.jsx)("button",{type:"submit",children:"Login"}),s&&(0,oI.jsx)("p",{children:s})]})},yI=()=>{const[e,n]=(0,t.useState)({username:"",email:""}),[r,i]=(0,t.useState)("");return(0,t.useEffect)((()=>{(async()=>{const e=sI.currentUser;if(e){const t=Fy(aI,"users",e.uid);try{const e=await Lv(t);e.exists()?n(e.data()):console.log("No user profile found!")}catch(r){i(r.message)}}})()}),[]),r?(0,oI.jsxs)("div",{children:["Error fetching user profile: ",r]}):(0,oI.jsxs)("div",{children:[(0,oI.jsx)("h1",{children:"User Profile"}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Username:"})," ",e.username]}),(0,oI.jsxs)("p",{children:[(0,oI.jsx)("strong",{children:"Email:"})," ",e.email]})]})},vI=()=>{const[e]=Ce(),n=X(),[r,i]=(0,t.useState)("");return(0,t.useEffect)((()=>{const t=e.get("mode"),r=e.get("oobCode");"verifyEmail"===t&&r&&Mb(sI,r).then((()=>{Vb(sI,(e=>{if(e){Uv(Fy(aI,"users",e.uid),{isVerified:!0}).then((()=>{n("/")})).catch((e=>{i(e.message)}))}else i("Verification successful, please log in.")}))})).catch((e=>{i(e.message)}))}),[n,e]),(0,oI.jsxs)("div",{children:[(0,oI.jsx)("h1",{children:"Verify Your Email"}),(0,oI.jsx)("p",{children:r||"Verifying your email..."})]})},wI=()=>{const[e,n]=(0,t.useState)([]);return(0,oI.jsx)(Se,{children:(0,oI.jsxs)("div",{className:"App",children:[(0,oI.jsx)(lI,{}),(0,oI.jsxs)(pe,{children:[(0,oI.jsx)(de,{path:"/",element:(0,oI.jsx)(dI,{})}),(0,oI.jsx)(de,{path:"/campaign-organizer",element:(0,oI.jsx)(cI,{campaigns:e,setCampaigns:n})}),(0,oI.jsx)(de,{path:"/campaign/:id",element:(0,oI.jsx)(hI,{campaigns:e})}),(0,oI.jsx)(de,{path:"/encounter-builder",element:(0,oI.jsx)(fI,{})}),(0,oI.jsx)(de,{path:"/npc-generator",element:(0,oI.jsx)(pI,{})}),(0,oI.jsx)(de,{path:"/signup",element:(0,oI.jsx)(mI,{})}),(0,oI.jsx)(de,{path:"/login",element:(0,oI.jsx)(gI,{})}),(0,oI.jsx)(de,{path:"/user-profile",element:(0,oI.jsx)(yI,{})}),(0,oI.jsx)(de,{path:"/verify-email",element:(0,oI.jsx)(vI,{})})]})]})})};i.render((0,oI.jsx)(t.StrictMode,{children:(0,oI.jsx)(wI,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.2f8e6ca9.js.map